;; Connected to nREPL server - nrepl://localhost:8202
;; CIDER 0.22.0snapshot (package: 20190329.1924), nREPL 0.6.0
;; Clojure 1.10.0, Java 1.8.0_191
;;     Docs: (doc function-name)
;;           (find-doc part-of-name)
;;   Source: (source function-name)
;;  Javadoc: (javadoc java-object-or-class)
;;     Exit: <C-c C-q>
;;  Results: Stored in vars *1, *2, *3, an exception in *e;
;; ======================================================================
;; If you’re new to CIDER it is highly recommended to go through its
;; manual first. Type <M-x cider-view-manual> to view it.
;; In case you’re seeing any warnings you should consult the manual’s
;; "Troubleshooting" section.
;;
;; Here are few tips to get you started:
;;
;; * Press <C-h m> to see a list of the keybindings available (this
;;   will work in every Emacs buffer)
;; * Press <, ,> to quickly invoke some REPL command
;; * Press <, s s> to switch between the REPL and a Clojure file
;; * Press <M-x cider-find-var> to jump to the source of something (e.g. a var, a
;;   Java method)
;; * Press <, h h> to view the documentation for something (e.g.
;;   a var, a Java method)
;; * Enable ‘eldoc-mode’ to display function & method signatures in the minibuffer.
;; * Print CIDER’s refcard and keep it close to your keyboard.
;;
;; CIDER is super customizable - try <M-x customize-group cider> to
;; get a feel for this. If you’re thirsty for knowledge you should try
;; <M-x cider-drink-a-sip>.
;;
;; If you think you’ve encountered a bug (or have some suggestions for
;; improvements) use <M-x cider-report-bug> to report it.
;;
;; Above all else - don’t panic! In case of an emergency - procure
;; some (hard) cider and enjoy it responsibly!
;;
;; You can remove this message with the <M-x cider-repl-clear-help-banner> command.
;; You can disable it from appearing on start by setting
;; ‘cider-repl-display-help-banner’ to nil.
;; ======================================================================
WARNING: No Clojure project was detected. The
refactor-nrepl middleware was not enabled. (You can mute this
warning by customizing `cljr-suppress-no-project-warning'.)To quit, type: :cljs/quit
[:selected :app]
shadow.user> 
cljs.user> (+ 1 1)
2
cljs.user> (:patterns @re-frame.db/app-db)
[{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates [{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}}]}][:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.47s)

cljs.user> (+ 1 1)
2
cljs.user> (ns time-align-mobile.handlers)
time-align-mobile.handlers
time-align-mobile.handlers> (defn delete-template [{:keys [db]} [_ id]]
  {:db (->> db
            (setval [:patterns sp/ALL :templates sp/ALL #(= id (:id %))] sp/NONE)
            (setval [:forms :template-form] nil)
            (setval [:forms :pattern-form] nil))
   ;; TODO pop stack when possible
   :dispatch [:navigate-to {:current-screen :templates}]})
#'time-align-mobile.handlers/delete-template
time-align-mobile.handlers> (delete-template {:db @re-frame.db/app-db} [:no-op #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"])
{:db {:active-filter nil, :time-navigators {:day #inst "2019-04-18T01:12:40.195-00:00", :calendar #inst "2019-04-18T01:12:40.195-00:00", :report #inst "2019-04-18T01:12:40.195-00:00"}, :now #inst "2019-04-18T01:17:57.743-00:00", :config {:auto-log-time-align true}, :filters [{:id #uuid "bbc34081-38d4-4d4f-ab19-a7cef18c1212", :label "sort by bucket label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:bucket-label], :ascending true}, :predicates []} {:id #uuid "aad94081-38d4-4d4f-ab19-a7cef18c1299", :label "sort by label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:bucket :filter :period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:label], :ascending true}, :predicates []} {:id #uuid "cccc4081-38d4-4d4f-ab19-a7cef18c4444", :label "time align bucket filter", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort nil, :predicates [{:path [:bucket-id], :value "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :negate false}]}], :patterns [{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates []}], :navigation {:current-screen :day, :params nil}, :period-in-play-id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :buckets [{:id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :color "#11aa11", :periods [{:id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :label "start using", :planned false, :start #inst "2019-04-18T01:12:40.195-00:00", :stop #inst "2019-04-18T01:17:57.743-00:00", :data {}}]}], :selected-period #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :forms {:bucket-form nil, :period-form nil, :pattern-form nil, :template-form nil, :filter-form nil}}, :dispatch [:navigate-to {:current-screen :templates}]}
time-align-mobile.handlers> (:patterns (delete-template {:db @re-frame.db/app-db} [:no-op #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"]))
nil
time-align-mobile.handlers> (get-in (delete-template {:db @re-frame.db/app-db} [:no-op #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"]) [:db :patterns])
[{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates []}]
time-align-mobile.handlers> (defn load-template-form [db [_ template-id]]
  (let [[pattern template] (select-one
                            [:patterns sp/ALL
                             (sp/collect-one (sp/submap [:id]))
                             :templates sp/ALL #(= (:id %) template-id)] db)
        bucket             (select-one [:buckets sp/ALL
                                        #(= (:bucket-id template) (:id %))] db)
        external-data      {:pattern-id   (:id pattern)
                            :bucket-color (:color bucket)
                            :bucket-label (:label bucket)}
        template-form      (merge template
                                  external-data
                                  {:data (helpers/print-data (:data template))})]

    (assoc-in db [:forms :template-form] template-form)))
#'time-align-mobile.handlers/load-template-form
time-align-mobile.handlers> (get-in @re-frame.db/app-db [:forms :template-form])
nil
time-align-mobile.handlers> (get-in @re-frame.db/app-db [:forms ])
{:bucket-form nil, :period-form nil, :pattern-form nil, :template-form nil, :filter-form nil}
time-align-mobile.handlers> (get-in (load-template-form @re-frame.db/app-db [:no-op #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"]) [:forms :template-form])
{:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "do something in time align", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}
time-align-mobile.handlers> (keys (get-in (load-template-form @re-frame.db/app-db [:no-op #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"]) [:forms :template-form]))
(:bucket-label :start :pattern-id :created :stop :label :id :last-edited :bucket-id :bucket-color :data)
time-align-mobile.handlers> (defn save-template-form [{:keys [db]} [_ date-time]]
  (let [template-form (get-in db [:forms :template-form])]
    (try
      (let [new-data            (read-string (:data template-form))
            keys-wanted         (->> template-form
                                     (keys)
                                     (remove #(or (= :bucket-id %)
                                                  (= :bucket-label %)
                                                  (= :bucket-color %)
                                                  (= :pattern-id))))
            new-template        (-> template-form
                                    (merge {:data        new-data
                                            :last-edited date-time})
                                    (select-keys keys-wanted))
            [old-pattern
             old-template]      (select-one [:patterns sp/ALL
                                             (sp/collect-one (sp/submap [:id]))
                                             :templates sp/ALL
                                             #(= (:id %) (:id new-template))] db)
            removed-template-db (setval [:patterns sp/ALL
                                         #(= (:id %) (:id old-pattern))
                                         :templates sp/ALL
                                         #(= (:id %) (:id old-template))]
                                        sp/NONE db)
            new-db              (setval [:patterns sp/ALL
                                         #(= (:id %) (:pattern-id template-form))
                                         :templates
                                         sp/NIL->VECTOR
                                         sp/AFTER-ELEM]
                                        new-template removed-template-db)]

        {:db       new-db
         ;; load template form so that the data string gets re-formatted prettier
         :dispatch [:load-template-form (:id new-template)]})
      (catch js/Error e
        {:db    db
         :alert (str "Failed data read validation " e)}))))
#'time-align-mobile.handlers/save-template-form
time-align-mobile.handlers> (setval [:forms :template-form :label] "new label" (load-template-form @re-frame.db/app-db [:no-op #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"]))
{:active-filter nil, :time-navigators {:day #inst "2019-04-18T01:12:40.195-00:00", :calendar #inst "2019-04-18T01:12:40.195-00:00", :report #inst "2019-04-18T01:12:40.195-00:00"}, :now #inst "2019-04-18T01:48:28.902-00:00", :config {:auto-log-time-align true}, :filters [{:id #uuid "bbc34081-38d4-4d4f-ab19-a7cef18c1212", :label "sort by bucket label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:bucket-label], :ascending true}, :predicates []} {:id #uuid "aad94081-38d4-4d4f-ab19-a7cef18c1299", :label "sort by label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:bucket :filter :period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:label], :ascending true}, :predicates []} {:id #uuid "cccc4081-38d4-4d4f-ab19-a7cef18c4444", :label "time align bucket filter", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort nil, :predicates [{:path [:bucket-id], :value "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :negate false}]}], :patterns [{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates [{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}}]}], :navigation {:current-screen :day, :params nil}, :period-in-play-id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :buckets [{:id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :color "#11aa11", :periods [{:id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :label "start using", :planned false, :start #inst "2019-04-18T01:12:40.195-00:00", :stop #inst "2019-04-18T01:48:28.902-00:00", :data {}}]}], :selected-period #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :forms {:bucket-form nil, :period-form nil, :pattern-form nil, :template-form {:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}, :filter-form nil}}
time-align-mobile.handlers> (def new-app-db (setval [:forms :template-form :label] "new label" (load-template-form @re-frame.db/app-db [:no-op #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"])))
#'time-align-mobile.handlers/new-app-db
time-align-mobile.handlers> (get-in @re-frame.db/app-db [:forms :template-form :label])
nil
time-align-mobile.handlers> (get-in new-app-db [:forms :template-form :label])
"new label"
time-align-mobile.handlers> (select-one [:patterns sp/ALL :templates sp/FIRST :label] new-app-db)
"do something in time align"
time-align-mobile.handlers> (save-template-form {:db new-app-db} [:no-op (js/Date.)])
{:db {:active-filter nil, :time-navigators {:day #inst "2019-04-18T01:12:40.195-00:00", :calendar #inst "2019-04-18T01:12:40.195-00:00", :report #inst "2019-04-18T01:12:40.195-00:00"}, :now #inst "2019-04-18T01:49:12.105-00:00", :config {:auto-log-time-align true}, :filters [{:id #uuid "bbc34081-38d4-4d4f-ab19-a7cef18c1212", :label "sort by bucket label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:bucket-label], :ascending true}, :predicates []} {:id #uuid "aad94081-38d4-4d4f-ab19-a7cef18c1299", :label "sort by label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:bucket :filter :period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:label], :ascending true}, :predicates []} {:id #uuid "cccc4081-38d4-4d4f-ab19-a7cef18c4444", :label "time align bucket filter", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort nil, :predicates [{:path [:bucket-id], :value "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :negate false}]}], :patterns [{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates [{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}} {}]}], :navigation {:current-screen :day, :params nil}, :period-in-play-id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :buckets [{:id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :color "#11aa11", :periods [{:id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :label "start using", :planned false, :start #inst "2019-04-18T01:12:40.195-00:00", :stop #inst "2019-04-18T01:49:12.105-00:00", :data {}}]}], :selected-period #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :forms {:bucket-form nil, :period-form nil, :pattern-form nil, :template-form {:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}, :filter-form nil}}, :dispatch [:load-template-form nil]}
time-align-mobile.handlers> (def result-db (save-template-form {:db new-app-db} [:no-op (js/Date.)]))
#'time-align-mobile.handlers/result-db
time-align-mobile.handlers> (select-one [:patterns sp/ALL :templates sp/FIRST :label] new-app-db)
"do something in time align"
time-align-mobile.handlers> (select-one [:patterns sp/ALL :templates sp/FIRST :label] result-db)
nil
time-align-mobile.handlers> (save-template-form {:db new-app-db} [:no-op (js/Date.)])
{:db {:active-filter nil, :time-navigators {:day #inst "2019-04-18T01:12:40.195-00:00", :calendar #inst "2019-04-18T01:12:40.195-00:00", :report #inst "2019-04-18T01:12:40.195-00:00"}, :now #inst "2019-04-18T01:49:12.105-00:00", :config {:auto-log-time-align true}, :filters [{:id #uuid "bbc34081-38d4-4d4f-ab19-a7cef18c1212", :label "sort by bucket label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:bucket-label], :ascending true}, :predicates []} {:id #uuid "aad94081-38d4-4d4f-ab19-a7cef18c1299", :label "sort by label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:bucket :filter :period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:label], :ascending true}, :predicates []} {:id #uuid "cccc4081-38d4-4d4f-ab19-a7cef18c4444", :label "time align bucket filter", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort nil, :predicates [{:path [:bucket-id], :value "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :negate false}]}], :patterns [{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates [{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}} {}]}], :navigation {:current-screen :day, :params nil}, :period-in-play-id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :buckets [{:id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :color "#11aa11", :periods [{:id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :label "start using", :planned false, :start #inst "2019-04-18T01:12:40.195-00:00", :stop #inst "2019-04-18T01:49:12.105-00:00", :data {}}]}], :selected-period #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :forms {:bucket-form nil, :period-form nil, :pattern-form nil, :template-form {:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}, :filter-form nil}}, :dispatch [:load-template-form nil]}
time-align-mobile.handlers> (select-one [:db :patterns sp/ALL :templates sp/FIRST :label] result-db)
"do something in time align"
time-align-mobile.handlers> (get-in new-app-db [:forms :template-form])
{:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}
time-align-mobile.handlers> (defn save-template-form [{:keys [db]} [_ date-time]]
  (let [template-form (get-in db [:forms :template-form])]
    (try
      (let [new-data            (read-string (:data template-form))
            keys-wanted         (->> template-form
                                     (keys)
                                     (remove #(or (= :bucket-id %)
                                                  (= :bucket-label %)
                                                  (= :bucket-color %)
                                                  (= :pattern-id))))
            new-template        (-> template-form
                                    (merge {:data        new-data
                                            :last-edited date-time})
                                    (select-keys keys-wanted))
            [old-pattern
             old-template]      (select-one [:patterns sp/ALL
                                             (sp/collect-one (sp/submap [:id]))
                                             :templates sp/ALL
                                             #(= (:id %) (:id new-template))] db)
            removed-template-db (setval [:patterns sp/ALL
                                         #(= (:id %) (:id old-pattern))
                                         :templates sp/ALL
                                         #(= (:id %) (:id old-template))]
                                        sp/NONE db)
            new-db              (setval [:patterns sp/ALL
                                         #(= (:id %) (:pattern-id template-form))
                                         :templates
                                         sp/NIL->VECTOR
                                         sp/AFTER-ELEM]
                                        new-template removed-template-db)]

        {:new-data new-data
         :keys-wanted keys-wanted
         :new-template new-template
         :old-pattern old-pattern
         :old-template old-template
         :removed-template-db (select-one [:patterns sp/ALL :templates sp/ALL] removed-template-db)
         :new-db (select-one [:patterns sp/ALL :templates sp/ALL] new-db)}
        ;; {:db       new-db
        ;;  ;; load template form so that the data string gets re-formatted prettier
        ;;  :dispatch [:load-template-form (:id new-template)]}
        )
      (catch js/Error e
        {:db    db
         :alert (str "Failed data read validation " e)}))))
#'time-align-mobile.handlers/save-template-form
time-align-mobile.handlers> (save-template-form {:db new-app-db} [:no-op (js/Date.)])
{:db {:active-filter nil, :time-navigators {:day #inst "2019-04-18T01:12:40.195-00:00", :calendar #inst "2019-04-18T01:12:40.195-00:00", :report #inst "2019-04-18T01:12:40.195-00:00"}, :now #inst "2019-04-18T01:49:12.105-00:00", :config {:auto-log-time-align true}, :filters [{:id #uuid "bbc34081-38d4-4d4f-ab19-a7cef18c1212", :label "sort by bucket label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:bucket-label], :ascending true}, :predicates []} {:id #uuid "aad94081-38d4-4d4f-ab19-a7cef18c1299", :label "sort by label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:bucket :filter :period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:label], :ascending true}, :predicates []} {:id #uuid "cccc4081-38d4-4d4f-ab19-a7cef18c4444", :label "time align bucket filter", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort nil, :predicates [{:path [:bucket-id], :value "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :negate false}]}], :patterns [{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates [{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}}]}], :navigation {:current-screen :day, :params nil}, :period-in-play-id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :buckets [{:id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :color "#11aa11", :periods [{:id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :label "start using", :planned false, :start #inst "2019-04-18T01:12:40.195-00:00", :stop #inst "2019-04-18T01:49:12.105-00:00", :data {}}]}], :selected-period #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :forms {:bucket-form nil, :period-form nil, :pattern-form nil, :template-form {:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}, :filter-form nil}}, :alert "Failed data read validation Error: More than one element found in structure: {}"}
time-align-mobile.handlers> (+ 1 1)
2
time-align-mobile.handlers> (js/Date.)
#inst "2019-04-18T14:07:21.407-00:00"
time-align-mobile.handlers> (get-in (load-template-form @re-frame.db/app-db [:no-op #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"]) [:forms :template-form])
{:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "do something in time align", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}
time-align-mobile.handlers> (helpers/print-data {})
"{}"
time-align-mobile.handlers> (read-string "{}")

{}
time-align-mobile.handlers> (defn save-template-form [{:keys [db]} [_ date-time]]
  (let [template-form (get-in db [:forms :template-form])]
    (try
      (let [new-data            (read-string (:data template-form))
            keys-wanted         (->> template-form
                                     (keys)
                                     (remove #(or (= :bucket-id %)
                                                  (= :bucket-label %)
                                                  (= :bucket-color %)
                                                  (= :pattern-id))))
            new-template        (-> template-form
                                    (merge {:data        new-data
                                            :last-edited date-time})
                                    (select-keys keys-wanted))
            [old-pattern
             old-template]      (select-one [:patterns sp/ALL
                                             (sp/collect-one (sp/submap [:id]))
                                             :templates sp/ALL
                                             #(= (:id %) (:id new-template))] db)
            removed-template-db (setval [:patterns sp/ALL
                                         #(= (:id %) (:id old-pattern))
                                         :templates sp/ALL
                                         #(= (:id %) (:id old-template))]
                                        sp/NONE db)
            new-db              (setval [:patterns sp/ALL
                                         #(= (:id %) (:pattern-id template-form))
                                         :templates
                                         sp/NIL->VECTOR
                                         sp/AFTER-ELEM]
                                        new-template removed-template-db)]

        {:new-data new-data
         :keys-wanted keys-wanted
         :new-template new-template
         :old-pattern old-pattern
         :old-template old-template
         :removed-template-db (select-one [:patterns sp/ALL :templates sp/ALL] removed-template-db)
         :new-db (select-one [:patterns sp/ALL :templates sp/ALL] new-db)}
        ;; {:db       new-db
        ;;  ;; load template form so that the data string gets re-formatted prettier
        ;;  :dispatch [:load-template-form (:id new-template)]}
        )
      (catch js/Error e
        {:db    db
         :alert (str "Failed data read validation " e)}))))
#'time-align-mobile.handlers/save-template-form
time-align-mobile.handlers> (save-template-form {:db new-app-db} [:no-op (js/Date.)])
{:db {:active-filter nil, :time-navigators {:day #inst "2019-04-18T01:12:40.195-00:00", :calendar #inst "2019-04-18T01:12:40.195-00:00", :report #inst "2019-04-18T01:12:40.195-00:00"}, :now #inst "2019-04-18T01:49:12.105-00:00", :config {:auto-log-time-align true}, :filters [{:id #uuid "bbc34081-38d4-4d4f-ab19-a7cef18c1212", :label "sort by bucket label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:bucket-label], :ascending true}, :predicates []} {:id #uuid "aad94081-38d4-4d4f-ab19-a7cef18c1299", :label "sort by label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:bucket :filter :period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:label], :ascending true}, :predicates []} {:id #uuid "cccc4081-38d4-4d4f-ab19-a7cef18c4444", :label "time align bucket filter", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort nil, :predicates [{:path [:bucket-id], :value "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :negate false}]}], :patterns [{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates [{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}}]}], :navigation {:current-screen :day, :params nil}, :period-in-play-id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :buckets [{:id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :color "#11aa11", :periods [{:id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :label "start using", :planned false, :start #inst "2019-04-18T01:12:40.195-00:00", :stop #inst "2019-04-18T01:49:12.105-00:00", :data {}}]}], :selected-period #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :forms {:bucket-form nil, :period-form nil, :pattern-form nil, :template-form {:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}, :filter-form nil}}, :alert "Failed data read validation Error: More than one element found in structure: {}"}[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.38s)

time-align-mobile.handlers> (defn save-template-form [{:keys [db]} [_ date-time]]
  (let [template-form (get-in db [:forms :template-form])]
    (try
      (let [new-data            (read-string (:data template-form))
            ;; keys-wanted         (->> template-form
            ;;                          (keys)
            ;;                          (remove #(or (= :bucket-id %)
            ;;                                       (= :bucket-label %)
            ;;                                       (= :bucket-color %)
            ;;                                       (= :pattern-id))))
            ;; new-template        (-> template-form
            ;;                         (merge {:data        new-data
            ;;                                 :last-edited date-time})
            ;;                         (select-keys keys-wanted))
            ;; [old-pattern
            ;;  old-template]      (select-one [:patterns sp/ALL
            ;;                                  (sp/collect-one (sp/submap [:id]))
            ;;                                  :templates sp/ALL
            ;;                                  #(= (:id %) (:id new-template))] db)
            ;; removed-template-db (setval [:patterns sp/ALL
            ;;                              #(= (:id %) (:id old-pattern))
            ;;                              :templates sp/ALL
            ;;                              #(= (:id %) (:id old-template))]
            ;;                             sp/NONE db)
            ;; new-db              (setval [:patterns sp/ALL
            ;;                              #(= (:id %) (:pattern-id template-form))
            ;;                              :templates
            ;;                              sp/NIL->VECTOR
            ;;                              sp/AFTER-ELEM]
            ;;                             new-template removed-template-db)
            ]

        {:new-data new-data
         ;; :keys-wanted keys-wanted
         ;; :new-template new-template
         ;; :old-pattern old-pattern
         ;; :old-template old-template
         ;; :removed-template-db (select-one [:patterns sp/ALL :templates sp/ALL] removed-template-db)
         ;; :new-db (select-one [:patterns sp/ALL :templates sp/ALL] new-db)
         }
        ;; {:db       new-db
        ;;  ;; load template form so that the data string gets re-formatted prettier
        ;;  :dispatch [:load-template-form (:id new-template)]}
        )
      (catch js/Error e
        {:db    db
         :alert (str "Failed data read validation " e)}))))
#'time-align-mobile.handlers/save-template-form
time-align-mobile.handlers> (save-template-form {:db new-app-db} [:no-op (js/Date.)])
WARNING: Use of undeclared Var time-align-mobile.handlers/new-app-db (<stdin> at 1:26)
{:new-data {}}
time-align-mobile.handlers> (defn save-template-form [{:keys [db]} [_ date-time]]
  (let [template-form (get-in db [:forms :template-form])]
    (try
      (let [new-data            (read-string (:data template-form))
            keys-wanted         (->> template-form
                                     (keys)
                                     (remove #(or (= :bucket-id %)
                                                  (= :bucket-label %)
                                                  (= :bucket-color %)
                                                  (= :pattern-id))))
            ;; new-template        (-> template-form
            ;;                         (merge {:data        new-data
            ;;                                 :last-edited date-time})
            ;;                         (select-keys keys-wanted))
            ;; [old-pattern
            ;;  old-template]      (select-one [:patterns sp/ALL
            ;;                                  (sp/collect-one (sp/submap [:id]))
            ;;                                  :templates sp/ALL
            ;;                                  #(= (:id %) (:id new-template))] db)
            ;; removed-template-db (setval [:patterns sp/ALL
            ;;                              #(= (:id %) (:id old-pattern))
            ;;                              :templates sp/ALL
            ;;                              #(= (:id %) (:id old-template))]
            ;;                             sp/NONE db)
            ;; new-db              (setval [:patterns sp/ALL
            ;;                              #(= (:id %) (:pattern-id template-form))
            ;;                              :templates
            ;;                              sp/NIL->VECTOR
            ;;                              sp/AFTER-ELEM]
            ;;                             new-template removed-template-db)
            ]

        {:new-data new-data
         :keys-wanted keys-wanted
         ;; :new-template new-template
         ;; :old-pattern old-pattern
         ;; :old-template old-template
         ;; :removed-template-db (select-one [:patterns sp/ALL :templates sp/ALL] removed-template-db)
         ;; :new-db (select-one [:patterns sp/ALL :templates sp/ALL] new-db)
         }
        ;; {:db       new-db
        ;;  ;; load template form so that the data string gets re-formatted prettier
        ;;  :dispatch [:load-template-form (:id new-template)]}
        )
      (catch js/Error e
        {:db    db
         :alert (str "Failed data read validation " e)}))))
#'time-align-mobile.handlers/save-template-form
time-align-mobile.handlers> (save-template-form {:db new-app-db} [:no-op (js/Date.)])
WARNING: Use of undeclared Var time-align-mobile.handlers/new-app-db (<stdin> at 1:26)
{:new-data {}, :keys-wanted ()}
time-align-mobile.handlers> (defn save-template-form [{:keys [db]} [_ date-time]]
  (let [template-form (get-in db [:forms :template-form])]
    (try
      (let [new-data            (read-string (:data template-form))
            keys-wanted         (->> template-form
                                     (keys)
                                     (remove #(or (= :bucket-id %)
                                                  (= :bucket-label %)
                                                  (= :bucket-color %)
                                                  (= :pattern-id))))
            ;; new-template        (-> template-form
            ;;                         (merge {:data        new-data
            ;;                                 :last-edited date-time})
            ;;                         (select-keys keys-wanted))
            ;; [old-pattern
            ;;  old-template]      (select-one [:patterns sp/ALL
            ;;                                  (sp/collect-one (sp/submap [:id]))
            ;;                                  :templates sp/ALL
            ;;                                  #(= (:id %) (:id new-template))] db)
            ;; removed-template-db (setval [:patterns sp/ALL
            ;;                              #(= (:id %) (:id old-pattern))
            ;;                              :templates sp/ALL
            ;;                              #(= (:id %) (:id old-template))]
            ;;                             sp/NONE db)
            ;; new-db              (setval [:patterns sp/ALL
            ;;                              #(= (:id %) (:pattern-id template-form))
            ;;                              :templates
            ;;                              sp/NIL->VECTOR
            ;;                              sp/AFTER-ELEM]
            ;;                             new-template removed-template-db)
            ]

        {:new-data new-data
         :keys-wanted keys-wanted
         :template-form template-form
         ;; :new-template new-template
         ;; :old-pattern old-pattern
         ;; :old-template old-template
         ;; :removed-template-db (select-one [:patterns sp/ALL :templates sp/ALL] removed-template-db)
         ;; :new-db (select-one [:patterns sp/ALL :templates sp/ALL] new-db)
         }
        ;; {:db       new-db
        ;;  ;; load template form so that the data string gets re-formatted prettier
        ;;  :dispatch [:load-template-form (:id new-template)]}
        )
      (catch js/Error e
        {:db    db
         :alert (str "Failed data read validation " e)}))))
#'time-align-mobile.handlers/save-template-form
time-align-mobile.handlers> (save-template-form {:db new-app-db} [:no-op (js/Date.)])
WARNING: Use of undeclared Var time-align-mobile.handlers/new-app-db (<stdin> at 1:26)
{:new-data {}, :keys-wanted (), :template-form {:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}}
time-align-mobile.handlers> (defn save-template-form [{:keys [db]} [_ date-time]]
  (let [template-form (get-in db [:forms :template-form])]
    (try
      (let [new-data            (read-string (:data template-form))
            keys-wanted         (->> template-form
                                     (keys)
                                     (remove #(or (= :bucket-id %)
                                                  (= :bucket-label %)
                                                  (= :bucket-color %)
                                                  (= :pattern-id %))))
            ;; new-template        (-> template-form
            ;;                         (merge {:data        new-data
            ;;                                 :last-edited date-time})
            ;;                         (select-keys keys-wanted))
            ;; [old-pattern
            ;;  old-template]      (select-one [:patterns sp/ALL
            ;;                                  (sp/collect-one (sp/submap [:id]))
            ;;                                  :templates sp/ALL
            ;;                                  #(= (:id %) (:id new-template))] db)
            ;; removed-template-db (setval [:patterns sp/ALL
            ;;                              #(= (:id %) (:id old-pattern))
            ;;                              :templates sp/ALL
            ;;                              #(= (:id %) (:id old-template))]
            ;;                             sp/NONE db)
            ;; new-db              (setval [:patterns sp/ALL
            ;;                              #(= (:id %) (:pattern-id template-form))
            ;;                              :templates
            ;;                              sp/NIL->VECTOR
            ;;                              sp/AFTER-ELEM]
            ;;                             new-template removed-template-db)
            ]

        {:new-data new-data
         :keys-wanted keys-wanted
         :template-form template-form
         ;; :new-template new-template
         ;; :old-pattern old-pattern
         ;; :old-template old-template
         ;; :removed-template-db (select-one [:patterns sp/ALL :templates sp/ALL] removed-template-db)
         ;; :new-db (select-one [:patterns sp/ALL :templates sp/ALL] new-db)
         }
        ;; {:db       new-db
        ;;  ;; load template form so that the data string gets re-formatted prettier
        ;;  :dispatch [:load-template-form (:id new-template)]}
        )
      (catch js/Error e
        {:db    db
         :alert (str "Failed data read validation " e)}))))
#'time-align-mobile.handlers/save-template-form
time-align-mobile.handlers> (save-template-form {:db new-app-db} [:no-op (js/Date.)])
WARNING: Use of undeclared Var time-align-mobile.handlers/new-app-db (<stdin> at 1:26)
{:new-data {}, :keys-wanted (:start :created :stop :label :id :last-edited :data), :template-form {:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}}
time-align-mobile.handlers> (defn save-template-form [{:keys [db]} [_ date-time]]
  (let [template-form (get-in db [:forms :template-form])]
    (try
      (let [new-data            (read-string (:data template-form))
            keys-wanted         (->> template-form
                                     (keys)
                                     (remove #(or (= :bucket-id %)
                                                  (= :bucket-label %)
                                                  (= :bucket-color %)
                                                  (= :pattern-id %))))
            new-template        (-> template-form
                                    (merge {:data        new-data
                                            :last-edited date-time})
                                    (select-keys keys-wanted))
            [old-pattern
             old-template]      (select-one [:patterns sp/ALL
                                             (sp/collect-one (sp/submap [:id]))
                                             :templates sp/ALL
                                             #(= (:id %) (:id new-template))] db)
            removed-template-db (setval [:patterns sp/ALL
                                         #(= (:id %) (:id old-pattern))
                                         :templates sp/ALL
                                         #(= (:id %) (:id old-template))]
                                        sp/NONE db)
            new-db              (setval [:patterns sp/ALL
                                         #(= (:id %) (:pattern-id template-form))
                                         :templates
                                         sp/NIL->VECTOR
                                         sp/AFTER-ELEM]
                                        new-template removed-template-db)
            ]

        {:new-data new-data
         :keys-wanted keys-wanted
         :template-form template-form
         :new-template new-template
         :old-pattern old-pattern
         :old-template old-template
         :removed-template-db (select-one [:patterns sp/ALL :templates sp/ALL] removed-template-db)
         :new-db (select-one [:patterns sp/ALL :templates sp/ALL] new-db)
         }
        ;; {:db       new-db
        ;;  ;; load template form so that the data string gets re-formatted prettier
        ;;  :dispatch [:load-template-form (:id new-template)]}
        )
      (catch js/Error e
        {:db    db
         :alert (str "Failed data read validation " e)}))))
#'time-align-mobile.handlers/save-template-form
time-align-mobile.handlers> (save-template-form {:db new-app-db} [:no-op (js/Date.)])
WARNING: Use of undeclared Var time-align-mobile.handlers/new-app-db (<stdin> at 1:26)
{:new-data {}, :keys-wanted (:start :created :stop :label :id :last-edited :data), :template-form {:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}, :new-template {:start {:hour 12, :minute 30}, :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T14:18:23.386-00:00", :data {}}, :old-pattern {:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465"}, :old-template {:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}}, :removed-template-db nil, :new-db {:start {:hour 12, :minute 30}, :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T14:18:23.386-00:00", :data {}}}
time-align-mobile.handlers> (defn save-template-form [{:keys [db]} [_ date-time]]
  (let [template-form (get-in db [:forms :template-form])]
    (try
      (let [new-data            (read-string (:data template-form))
            keys-wanted         (->> template-form
                                     (keys)
                                     (remove #(or (= :bucket-id %)
                                                  (= :bucket-label %)
                                                  (= :bucket-color %)
                                                  (= :pattern-id %))))
            new-template        (-> template-form
                                    (merge {:data        new-data
                                            :last-edited date-time})
                                    (select-keys keys-wanted))
            [old-pattern
             old-template]      (select-one [:patterns sp/ALL
                                             (sp/collect-one (sp/submap [:id]))
                                             :templates sp/ALL
                                             #(= (:id %) (:id new-template))] db)
            removed-template-db (setval [:patterns sp/ALL
                                         #(= (:id %) (:id old-pattern))
                                         :templates sp/ALL
                                         #(= (:id %) (:id old-template))]
                                        sp/NONE db)
            new-db              (setval [:patterns sp/ALL
                                         #(= (:id %) (:pattern-id template-form))
                                         :templates
                                         sp/NIL->VECTOR
                                         sp/AFTER-ELEM]
                                        new-template removed-template-db)
            ]

        {:new-data new-data
         :keys-wanted keys-wanted
         :template-form template-form
         :new-template new-template
         :old-pattern old-pattern
         :old-template old-template
         :removed-template-db (select-one [:patterns sp/ALL ] removed-template-db)
         :new-db (select-one [:patterns sp/ALL :templates sp/ALL] new-db)
         }
        ;; {:db       new-db
        ;;  ;; load template form so that the data string gets re-formatted prettier
        ;;  :dispatch [:load-template-form (:id new-template)]}
        )
      (catch js/Error e
        {:db    db
         :alert (str "Failed data read validation " e)}))))
#'time-align-mobile.handlers/save-template-form
time-align-mobile.handlers> (save-template-form {:db new-app-db} [:no-op (js/Date.)])
WARNING: Use of undeclared Var time-align-mobile.handlers/new-app-db (<stdin> at 1:26)
{:new-data {}, :keys-wanted (:start :created :stop :label :id :last-edited :data), :template-form {:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}, :new-template {:start {:hour 12, :minute 30}, :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T14:19:18.918-00:00", :data {}}, :old-pattern {:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465"}, :old-template {:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}}, :removed-template-db {:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates []}, :new-db {:start {:hour 12, :minute 30}, :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T14:19:18.918-00:00", :data {}}}
time-align-mobile.handlers> (defn save-template-form [{:keys [db]} [_ date-time]]
  (let [template-form (get-in db [:forms :template-form])]
    (try
      (let [new-data            (read-string (:data template-form))
            keys-wanted         (->> template-form
                                     (keys)
                                     (remove #(or (= :bucket-id %)
                                                  (= :bucket-label %)
                                                  (= :bucket-color %)
                                                  (= :pattern-id %))))
            new-template        (-> template-form
                                    (merge {:data        new-data
                                            :last-edited date-time})
                                    (select-keys keys-wanted))
            [old-pattern
             old-template]      (select-one [:patterns sp/ALL
                                             (sp/collect-one (sp/submap [:id]))
                                             :templates sp/ALL
                                             #(= (:id %) (:id new-template))] db)
            removed-template-db (setval [:patterns sp/ALL
                                         #(= (:id %) (:id old-pattern))
                                         :templates sp/ALL
                                         #(= (:id %) (:id old-template))]
                                        sp/NONE db)
            new-db              (setval [:patterns sp/ALL
                                         #(= (:id %) (:pattern-id template-form))
                                         :templates
                                         sp/NIL->VECTOR
                                         sp/AFTER-ELEM]
                                        new-template removed-template-db)]

        {:db       new-db
         ;; load template form so that the data string gets re-formatted prettier
         :dispatch [:load-template-form (:id new-template)]})
      (catch js/Error e
        {:db    db
         :alert (str "Failed data read validation " e)}))))
#'time-align-mobile.handlers/save-template-form
time-align-mobile.handlers> (save-template-form {:db new-app-db} [:no-op (js/Date.)])
WARNING: Use of undeclared Var time-align-mobile.handlers/new-app-db (<stdin> at 1:26)
{:db {:active-filter nil, :time-navigators {:day #inst "2019-04-18T01:12:40.195-00:00", :calendar #inst "2019-04-18T01:12:40.195-00:00", :report #inst "2019-04-18T01:12:40.195-00:00"}, :now #inst "2019-04-18T01:49:12.105-00:00", :config {:auto-log-time-align true}, :filters [{:id #uuid "bbc34081-38d4-4d4f-ab19-a7cef18c1212", :label "sort by bucket label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:bucket-label], :ascending true}, :predicates []} {:id #uuid "aad94081-38d4-4d4f-ab19-a7cef18c1299", :label "sort by label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:bucket :filter :period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:label], :ascending true}, :predicates []} {:id #uuid "cccc4081-38d4-4d4f-ab19-a7cef18c4444", :label "time align bucket filter", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort nil, :predicates [{:path [:bucket-id], :value "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :negate false}]}], :patterns [{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates [{:start {:hour 12, :minute 30}, :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T14:20:10.898-00:00", :data {}}]}], :navigation {:current-screen :day, :params nil}, :period-in-play-id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :buckets [{:id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :color "#11aa11", :periods [{:id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :label "start using", :planned false, :start #inst "2019-04-18T01:12:40.195-00:00", :stop #inst "2019-04-18T01:49:12.105-00:00", :data {}}]}], :selected-period #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :forms {:bucket-form nil, :period-form nil, :pattern-form nil, :template-form {:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "new label", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}, :filter-form nil}}, :dispatch [:load-template-form #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"]}
time-align-mobile.handlers> (select-one [:patterns sp/ALL :templates sp/FIRST :label] (save-template-form {:db new-app-db} [:no-op (js/Date.)]))
WARNING: Use of undeclared Var time-align-mobile.handlers/new-app-db (<stdin> at 1:84)
nil
time-align-mobile.handlers> (= "new label" (select-one [:db :patterns sp/ALL :templates sp/FIRST :label] (save-template-form {:db new-app-db} [:no-op (js/Date.)])))
WARNING: Use of undeclared Var time-align-mobile.handlers/new-app-db (<stdin> at 1:103)
true[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.40s)

time-align-mobile.handlers> (def app-db-template-form-loaded (load-template-form @re-frame.db/app-db [:no-op #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"]))
#'time-align-mobile.handlers/app-db-template-form-loaded
time-align-mobile.handlers> (get-in app-db-template-form-loaded [:forms :template-form])
{:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "do something in time align", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}
time-align-mobile.handlers> (defn update-template-form [db [_ template-form]]
  (let [template-form (if (and (contains? template-form :bucket-id)
                               (contains? template-form :pattern-id))
                        (merge template-form
                               {:bucket-label (:label
                                               (select-one
                                                [:buckets
                                                 sp/ALL
                                                 #(= (:id %) (:bucket-id template-form))]
                                                db))}
                               {:pattern-label (:label
                                                (select-one
                                                 [:patterns
                                                  sp/ALL
                                                  #(= (:id %) (:pattern-id template-form))]
                                                 db))})
                        ;; ^ pulls out the label when selecting new parent
                        ;; because all that comes from the picker is id
                        template-form)]
    (transform [:forms :template-form] #(merge % template-form) db)))
#'time-align-mobile.handlers/update-template-form
time-align-mobile.handlers> (get-in (update-template-form app-db-template-form-loaded [:no-op {:label "update template form tested"}]) [:forms :template-form])
{:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "update template form tested", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.42s)
[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.40s)

time-align-mobile.handlers> (def add-new-payload-test {:pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465" :id #uuid "9f949891-38d4-4d4f-ab19-a7cef18c9999" :now (js/Date. 2019 5 18)})
#'time-align-mobile.handlers/add-new-payload-test
time-align-mobile.handlers> @re-frame.db/app-db
{:active-filter nil, :time-navigators {:day #inst "2019-04-18T01:12:40.195-00:00", :calendar #inst "2019-04-18T01:12:40.195-00:00", :report #inst "2019-04-18T01:12:40.195-00:00"}, :now #inst "2019-04-18T16:31:00.374-00:00", :config {:auto-log-time-align true}, :filters [{:id #uuid "bbc34081-38d4-4d4f-ab19-a7cef18c1212", :label "sort by bucket label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:bucket-label], :ascending true}, :predicates []} {:id #uuid "aad94081-38d4-4d4f-ab19-a7cef18c1299", :label "sort by label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:bucket :filter :period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:label], :ascending true}, :predicates []} {:id #uuid "cccc4081-38d4-4d4f-ab19-a7cef18c4444", :label "time align bucket filter", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort nil, :predicates [{:path [:bucket-id], :value "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :negate false}]}], :patterns [{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates [{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}}]}], :navigation {:current-screen :day, :params nil}, :period-in-play-id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :buckets [{:id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :color "#11aa11", :periods [{:id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :label "start using", :planned false, :start #inst "2019-04-18T01:12:40.195-00:00", :stop #inst "2019-04-18T16:31:00.374-00:00", :data {}}]}], :selected-period #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :forms {:bucket-form nil, :period-form nil, :pattern-form nil, :template-form nil, :filter-form nil}}
time-align-mobile.handlers> (defn add-new-template [{:keys [db]} [_ {:keys [pattern-id id now]}]]
  {:db       (setval [:patterns sp/ALL
                      #(= (:id %) pattern-id)
                      :templates
                      sp/NIL->VECTOR
                      sp/AFTER-ELEM]
                     {:id          id
                      :created     now
                      :last-edited now
                      :label       ""
                      :data        {}
                      :planned     true
                      :start       {:hour   (.getHours now)
                                    :minute (.getMinutes now)}
                      :stop        {:hour   (.getHours now)
                                    :minute (+ 5 (.getMinutes now))}
                      :duration    nil}
                     db)
   :dispatch [:navigate-to {:current-screen :template
                            :params         {:template-id id}}]})
#'time-align-mobile.handlers/add-new-template
time-align-mobile.handlers> (select [:patterns sp/ALL :templates sp/ALL] @re-frame.db/app-db)
[{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}}]
time-align-mobile.handlers> (count (select [:patterns sp/ALL :templates sp/ALL] @re-frame.db/app-db))
1
time-align-mobile.handlers> (select [:db :patterns sp/ALL :templates sp/ALL] (add-new-template {:db @re-frame.db/app-db} [:no-op add-new-payload-test]))
[{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}} {:planned true, :start {:hour 0, :minute 0}, :created #inst "2019-06-18T04:00:00.000-00:00", :duration nil, :stop {:hour 0, :minute 5}, :label "", :id #uuid "9f949891-38d4-4d4f-ab19-a7cef18c9999", :last-edited #inst "2019-06-18T04:00:00.000-00:00", :data {}}]
time-align-mobile.handlers> (count (select [:db :patterns sp/ALL :templates sp/ALL] (add-new-template {:db @re-frame.db/app-db} [:no-op add-new-payload-test])))
2[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.41s)
[:app] Compiling ...
[:app] Build failure:
------ ERROR -------------------------------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/subs.cljs:127:28
--------------------------------------------------------------------------------
 124 |        (map (fn [[pattern template]]
 125 |               (merge template {:pattern-id (:id pattern)})))
 126 |        (map (fn [template]
 127 |               (let [bucket (select-one [:buckets
----------------------------------^---------------------------------------------
Error in phase :compilation
Wrong number of args (1) passed to: com.rpl.specter/select-one
--------------------------------------------------------------------------------
 128 |                                         sp/ALL
 129 |                                         #(= (:id %) (:bucket-id template))])]
 130 |                 (merge template
 131 |                        {:bucket-label (:label bucket)
--------------------------------------------------------------------------------


time-align-mobile.handlers> (ns time-align-mobile.subs)
no source by id: [:shadow.build.classpath/resource "time_align_mobile/subs.cljs"]
{:id [:shadow.build.classpath/resource "time_align_mobile/subs.cljs"]}
ExceptionInfo: no source by id: [:shadow.build.classpath/resource "time_align_mobile/subs.cljs"]
	shadow.build.data/get-source-by-id (data.clj:167)
	shadow.build.data/get-source-by-id (data.clj:164)
	shadow.build.compiler/remove-dead-js-deps/remove-fn--11861/fn--11862 (compiler.clj:1011)
	clojure.core/complement/fn--5654 (core.clj:1441)
	clojure.core/filter/fn--5878 (core.clj:2817)
	clojure.lang.LazySeq.sval (LazySeq.java:42)
	clojure.lang.LazySeq.seq (LazySeq.java:51)
	clojure.lang.ChunkedCons.chunkedNext (ChunkedCons.java:59)
	clojure.core/chunk-next (core.clj:708)
	clojure.core.protocols/fn--8139 (protocols.clj:137)
	clojure.core.protocols/fn--8139 (protocols.clj:124)
	clojure.core.protocols/fn--8099/G--8094--8108 (protocols.clj:19)
	clojure.core.protocols/seq-reduce (protocols.clj:31)
	clojure.core.protocols/fn--8131 (protocols.clj:75)
	clojure.core.protocols/fn--8131 (protocols.clj:75)
	clojure.core.protocols/fn--8073/G--8068--8086 (protocols.clj:13)
	clojure.core/reduce (core.clj:6828)
	clojure.core/into (core.clj:6895)
	clojure.core/into (core.clj:6887)
	shadow.build.compiler/remove-dead-js-deps/remove-fn--11861 (compiler.clj:1013)
	clojure.core/update (core.clj:6196)
	clojure.core/update (core.clj:6188)
	shadow.build.compiler/remove-dead-js-deps/fn--11866/fn--11867 (compiler.clj:1019)
	clojure.core/map/fn--5851 (core.clj:2753)
	clojure.lang.LazySeq.sval (LazySeq.java:42)
	clojure.lang.LazySeq.seq (LazySeq.java:51)
	clojure.lang.RT.seq (RT.java:531)
	clojure.core/seq--5387 (core.clj:137)
	clojure.core.protocols/seq-reduce (protocols.clj:24)
	clojure.core.protocols/fn--8131 (protocols.clj:75)
	clojure.core.protocols/fn--8131 (protocols.clj:75)
	clojure.core.protocols/fn--8073/G--8068--8086 (protocols.clj:13)
	clojure.core/reduce (core.clj:6828)
	clojure.core/into (core.clj:6895)
	clojure.core/into (core.clj:6887)
	shadow.build.compiler/remove-dead-js-deps/fn--11866 (compiler.clj:1020)
	clojure.core/update (core.clj:6196)
	clojure.core/update (core.clj:6188)
	shadow.build.compiler/remove-dead-js-deps (compiler.clj:1017)
	shadow.build.compiler/remove-dead-js-deps (compiler.clj:1006)
	shadow.build.compiler/compile-all (compiler.clj:1260)
	shadow.build.compiler/compile-all (compiler.clj:1116)
	shadow.build.api/compile-sources (api.clj:250)
	shadow.build.api/compile-sources (api.clj:242)
	shadow.build.api/compile-sources (api.clj:254)
	shadow.build.api/compile-sources (api.clj:242)
	shadow.cljs.repl/repl-ns (repl.clj:312)
	shadow.cljs.repl/repl-ns (repl.clj:292)
	shadow.cljs.repl/process-read-result (repl.clj:401)
	shadow.cljs.repl/process-read-result (repl.clj:381)
	shadow.cljs.devtools.server.worker.impl/fn--13210 (impl.clj:784)
	shadow.cljs.devtools.server.worker.impl/fn--13210 (impl.clj:745)
	clojure.lang.MultiFn.invoke (MultiFn.java:234)
	shadow.cljs.devtools.server.util/server-thread/fn--12888/fn--12889/fn--12897 (util.clj:292)
	shadow.cljs.devtools.server.util/server-thread/fn--12888/fn--12889 (util.clj:291)
	shadow.cljs.devtools.server.util/server-thread/fn--12888 (util.clj:264)
	java.lang.Thread.run (Thread.java:748)
time-align-mobile.handlers> (+ 1 1)
2[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.18s)

time-align-mobile.handlers> (ns time-align-mobile.subs) 
time-align-mobile.subs
time-align-mobile.subs> @re-frame.db/app-db
{:active-filter nil, :time-navigators {:day #inst "2019-04-18T01:12:40.195-00:00", :calendar #inst "2019-04-18T01:12:40.195-00:00", :report #inst "2019-04-18T01:12:40.195-00:00"}, :now #inst "2019-04-18T22:38:20.395-00:00", :config {:auto-log-time-align true}, :filters [{:id #uuid "bbc34081-38d4-4d4f-ab19-a7cef18c1212", :label "sort by bucket label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:bucket-label], :ascending true}, :predicates []} {:id #uuid "aad94081-38d4-4d4f-ab19-a7cef18c1299", :label "sort by label", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:bucket :filter :period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort {:path [:label], :ascending true}, :predicates []} {:id #uuid "cccc4081-38d4-4d4f-ab19-a7cef18c4444", :label "time align bucket filter", :created #inst "2019-04-18T01:12:40.195-00:00", :compatible [:period :template], :last-edited #inst "2019-04-18T01:12:40.195-00:00", :sort nil, :predicates [{:path [:bucket-id], :value "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :negate false}]}], :patterns [{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates [{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}}]}], :navigation {:current-screen :day, :params nil}, :period-in-play-id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :buckets [{:id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :color "#11aa11", :periods [{:id #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :label "start using", :planned false, :start #inst "2019-04-18T01:12:40.195-00:00", :stop #inst "2019-04-18T22:38:20.395-00:00", :data {}}]}], :selected-period #uuid "a8404f81-38d4-4d4f-ab19-a7cef18c4531", :forms {:bucket-form nil, :period-form nil, :pattern-form nil, :template-form nil, :filter-form nil}}
time-align-mobile.subs> (def app-db @re-frame.db/app-db)
#'time-align-mobile.subs/app-db
time-align-mobile.subs> (get-templates app-db :no-op)
WARNING: Use of undeclared Var time-align-mobile.subs/get-templates (<stdin> at 1:2)
({:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "do something in time align", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data {}})[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.20s)

time-align-mobile.subs> (defn get-template-form [db _]
  (let [template-form    (get-in db [:forms :template-form])
        template-form-id (:id template-form)]
    (if (and (some? template-form-id)
             (uuid? template-form-id))
      template-form
      {:id           "****"
       :bucket-color "#2222aa"
       :bucket-label "****"
       :bucket-id    "****"
       :pattern-id   "****"
       :created      (js/Date.)
       :last-edited  (js/Date.)
       :label        "****"
       :start        nil
       :stop         nil
       :data         {:please "wait"}})))
#'time-align-mobile.subs/get-template-form
time-align-mobile.subs> (get-template-form app-db :no-op)
WARNING: Use of undeclared Var time-align-mobile.subs/app-db (<stdin> at 1:20)
{:bucket-label "****", :start nil, :pattern-id "****", :created #inst "2019-04-19T20:59:25.022-00:00", :stop nil, :label "****", :id "****", :last-edited #inst "2019-04-19T20:59:25.022-00:00", :bucket-id "****", :bucket-color "#2222aa", :data {:please "wait"}}
time-align-mobile.subs> (js/Date.)
#inst "2019-04-19T21:00:10.553-00:00"
time-align-mobile.subs> (def app-db-template-form-loaded (load-template-form @re-frame.db/app-db [:no-op #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"]))
WARNING: Use of undeclared Var time-align-mobile.subs/load-template-form (<stdin> at 1:35)

eval code
eval@[native code]
http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:81360:20
shadow$cljs$devtools$client$env$repl_call@http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:80493:117
shadow$cljs$devtools$client$react_native$repl_invoke@http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:81358:59
shadow$cljs$devtools$client$react_native$handle_message@http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:81431:68
shadow$cljs$devtools$client$env$process_ws_msg@http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:80640:113
http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:81498:62
dispatchEvent@http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:104115:31
http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:105274:31
emit@http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:83353:42
__callFunction@http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:82648:49
http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:82421:31
__guard@http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:82602:15
callFunctionReturnFlushedQueue@http://192.168.1.71:19001/./app/index.bundle?platform=android&dev=true&minify=false&hot=false&assetPlugin=%2Fhome%2Fjustin%2Fprojects%2Ftime-align-mobile%2Fnode_modules%2Fexpo%2Ftools%2FhashAssetFiles.js:82420:21
callFunctionReturnFlushedQueue@[native code]
time-align-mobile.subs> (def app-db-template-form-loaded (time-align-mobile.handlers/load-template-form @re-frame.db/app-db [:no-op #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647"]))
#'time-align-mobile.subs/app-db-template-form-loaded
time-align-mobile.subs> (get-template-form app-db-template-form-loaded :no-op)
{:bucket-label "time align", :start {:hour 12, :minute 30}, :pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "do something in time align", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :bucket-color "#11aa11", :data "{}"}
time-align-mobile.subs> (defn get-template-form-changes [db _]
  (let [template-form (get-in db [:forms :template-form])]
    (if (some? (:id template-form))
      (let [[pattern template] (select-one
                                [:patterns sp/ALL
                                 (sp/collect-one
                                  (sp/submap [:id :label]))
                                 :templates sp/ALL
                                 #(= (:id %) (:id template-form))]
                                db)
            ;; data needs to be coerced to compare to form
            new-data           (helpers/print-data (:data template))
            bucket             (select-one [:buckets sp/ALL
                                            #(= (:id %) (:bucket-id template))]
                                           db)
            altered-template   (merge template {:data          new-data
                                                :pattern-label (:label pattern)
                                                :bucket-color  (:color bucket)
                                                :bucket-label  (:label bucket)})
            different-keys     (->> (clojure.data/diff template-form altered-template)
                                    (first))]
        (if (nil? different-keys)
          {} ;; empty map if no changes
          different-keys))
      ;; return an empty map if there is no loaded template in the form
      {})))
#'time-align-mobile.subs/get-template-form-changes
time-align-mobile.subs> (get-template-form-changes app-db-template-form-loaded :no-op)
{:pattern-id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465"}
time-align-mobile.subs> (defn get-template-form-changes [db _]
  (let [template-form (get-in db [:forms :template-form])]
    (if (some? (:id template-form))
      (let [[pattern template] (select-one
                                [:patterns sp/ALL
                                 (sp/collect-one
                                  (sp/submap [:id :label]))
                                 :templates sp/ALL
                                 #(= (:id %) (:id template-form))]
                                db)
            ;; data needs to be coerced to compare to form
            new-data           (helpers/print-data (:data template))
            bucket             (select-one
                                [:buckets sp/ALL
                                 #(= (:id %) (:bucket-id template-form))]
                                           db)
            altered-template   (merge template {:data          new-data
                                                :pattern-id    (:id pattern)
                                                :pattern-label (:label pattern)
                                                :bucket-color  (:color bucket)
                                                :bucket-label  (:label bucket)})
            different-keys     (->> (clojure.data/diff
                                     template-form altered-template)
                                    (first))]
        (if (nil? different-keys)
          {} ;; empty map if no changes
          different-keys))
      ;; return an empty map if there is no loaded template in the form
      {})))
#'time-align-mobile.subs/get-template-form-changes
time-align-mobile.subs> (get-template-form-changes app-db-template-form-loaded :no-op)
{}
time-align-mobile.subs> (get-template-form-changes (assoc-in app-db-template-form-loaded [:forms :template-form :label "test form chagne sub"]) :no-op)
;; output cleared

time-align-mobile.subs> (get-template-form-changes (assoc-in app-db-template-form-loaded [:forms :template-form :label ] "test form chagne sub") :no-op)
{:label "test form chagne sub"}[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.21s)

time-align-mobile.subs> (defn get-patterns [db _]
  (select [:patterns sp/ALL]) db)
Error in phase :compilation
Wrong number of args (1) passed to: com.rpl.specter/select
time-align-mobile.subs>  (defn get-patterns [db _]
  (select [:patterns sp/ALL] db))
#'time-align-mobile.subs/get-patterns
time-align-mobile.subs> (get-patterns app-db)
WARNING: Wrong number of args (1) passed to time-align-mobile.subs/get-patterns (<stdin> at 1:1)
WARNING: Use of undeclared Var time-align-mobile.subs/app-db (<stdin> at 1:15)
[{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :templates [{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}}]}]
time-align-mobile.subs> (count (get-patterns app-db))
WARNING: Wrong number of args (1) passed to time-align-mobile.subs/get-patterns (<stdin> at 1:8)
WARNING: Use of undeclared Var time-align-mobile.subs/app-db (<stdin> at 1:22)
1[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.18s)
[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.45s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.10s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.09s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.07s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.10s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.08s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.08s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.10s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.07s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.08s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.11s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.09s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.09s)
[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.08s)
[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.43s)
[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.42s)

time-align-mobile.subs> (->> time-align-mobile.db/filterable-types vec)
[:template :filter :period :bucket :pattern][:app] Compiling ...
[:app] Build failure:
Circular dependency detected: time-align-mobile.db -> time-align-mobile.navigation -> time-align-mobile.screens.filter-form -> time-align-mobile.db

[:app] Compiling ...
[:app] Build failure:
Circular dependency detected: time-align-mobile.db -> time-align-mobile.navigation -> time-align-mobile.screens.filter-form -> time-align-mobile.db

[:app] Compiling ...
[:app] Build failure:
Circular dependency detected: time-align-mobile.db -> time-align-mobile.navigation -> time-align-mobile.screens.filter-form -> time-align-mobile.db

[:app] Compiling ...
[:app] Build failure:
Circular dependency detected: time-align-mobile.db -> time-align-mobile.navigation -> time-align-mobile.screens.filter-form -> time-align-mobile.db

[:app] Compiling ...
[:app] Build completed. (176 files, 3 compiled, 0 warnings, 0.13s)
[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.41s)
[:app] Compiling ...
[:app] Build completed. (176 files, 3 compiled, 0 warnings, 0.13s)
[:app] Compiling ...
[:app] Build completed. (176 files, 3 compiled, 0 warnings, 0.14s)
[:app] Compiling ...
[:app] Build completed. (176 files, 3 compiled, 0 warnings, 0.12s)
[:app] Compiling ...
[:app] Build completed. (176 files, 3 compiled, 0 warnings, 0.13s)

time-align-mobile.subs> (+ 1 1)
2[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 1 warnings, 0.20s)

------ WARNING #1 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/components/list_items.cljs:35:33
--------------------------------------------------------------------------------
  32 |      {:style {:width            50
  33 |               :height           50
  34 |               :margin-right     20
  35 |               :background-color color}}]
---------------------------------------^----------------------------------------
 Use of undeclared Var time-align-mobile.components.list-items/color
--------------------------------------------------------------------------------
  36 |     [view {:style {:flex-direction "column"}}
  37 |      [text (if (> (count label) 0) label "No label")]
  38 |      [text {:style {:color "grey"}} "templates: " (count templates)]
  39 |      [text {:style {:color "grey"}} (str "id: " id)]]]])
--------------------------------------------------------------------------------
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.21s)
[:app] Compiling ...
[:app] Build completed. (176 files, 5 compiled, 0 warnings, 0.19s)
[:app] Compiling ...
[:app] Build completed. (176 files, 2 compiled, 0 warnings, 0.08s)
[:app] Compiling ...
[:app] Build completed. (177 files, 4 compiled, 0 warnings, 0.11s)
[:app] Compiling ...
[:app] Build completed. (177 files, 3 compiled, 1 warnings, 0.11s)

------ WARNING #1 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/navigation.cljs:123:19
--------------------------------------------------------------------------------
 120 | 
 121 | ;; https://expo.github.io/vector-icons/
 122 | (def screens-map [bucket-screen
 123 |                   buckets-screen
-------------------------^------------------------------------------------------
 Use of undeclared Var time-align-mobile.navigation/buckets-screen
--------------------------------------------------------------------------------
 124 |                   period-screen
 125 |                   periods-screen
 126 |                   template-screen
 127 |                   templates-screen
--------------------------------------------------------------------------------
[:app] Compiling ...
[:app] Build completed. (177 files, 3 compiled, 1 warnings, 0.12s)

------ WARNING #1 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/navigation.cljs:123:19
--------------------------------------------------------------------------------
 120 | 
 121 | ;; https://expo.github.io/vector-icons/
 122 | (def screens-map [bucket-screen
 123 |                   buckets-screen
-------------------------^------------------------------------------------------
 Use of undeclared Var time-align-mobile.navigation/buckets-screen
--------------------------------------------------------------------------------
 124 |                   period-screen
 125 |                   periods-screen
 126 |                   template-screen
 127 |                   templates-screen
--------------------------------------------------------------------------------
[:app] Compiling ...
[:app] Build completed. (177 files, 3 compiled, 0 warnings, 0.14s)
[:app] Compiling ...
[:app] Build completed. (177 files, 3 compiled, 0 warnings, 0.11s)

time-align-mobile.subs> (+ 1 1)
2[:app] Compiling ...
[:app] Build completed. (177 files, 3 compiled, 0 warnings, 0.13s)
pressed a pattern in the list
pressed to add a new pattern
pressed to add a new pattern
pressed to add a new pattern
[:app] Compiling ...
[:app] Build completed. (177 files, 2 compiled, 0 warnings, 0.08s)
pressed a pattern in the list
[:app] Compiling ...
[:app] Build completed. (177 files, 2 compiled, 0 warnings, 0.19s)
[:app] Compiling ...
[:app] Build completed. (177 files, 2 compiled, 0 warnings, 0.26s)
[:app] Compiling ...
[:app] Build completed. (177 files, 2 compiled, 0 warnings, 0.18s)
[:app] Compiling ...
[:app] Build completed. (178 files, 4 compiled, 0 warnings, 0.12s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.40s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.41s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.40s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.07s)
pressed a pattern in the list
[:app] Compiling ...
[:app] Build completed. (178 files, 3 compiled, 1 warnings, 0.10s)

------ WARNING #1 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/navigation.cljs:136:19
--------------------------------------------------------------------------------
 133 | ;; https://expo.github.io/vector-icons/
 134 | (def screens-map [bucket-screen
 135 |                   buckets-screen
 136 |                   pattern-srceen
-------------------------^------------------------------------------------------
 Use of undeclared Var time-align-mobile.navigation/pattern-srceen
--------------------------------------------------------------------------------
 137 |                   patterns-screen
 138 |                   period-screen
 139 |                   periods-screen
 140 |                   template-screen
--------------------------------------------------------------------------------
[:app] Compiling ...
[:app] Build completed. (178 files, 3 compiled, 1 warnings, 0.12s)

------ WARNING #1 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/navigation.cljs:136:19
--------------------------------------------------------------------------------
 133 | 
 134 | (def screens-map [bucket-screen
 135 |                   buckets-screen
 136 |                   pattern-srceen
-------------------------^------------------------------------------------------
 Use of undeclared Var time-align-mobile.navigation/pattern-srceen
--------------------------------------------------------------------------------
 137 |                   patterns-screen
 138 |                   period-screen
 139 |                   periods-screen
 140 |                   template-screen
--------------------------------------------------------------------------------
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 1 warnings, 0.41s)

------ WARNING #1 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/navigation.cljs:136:19
--------------------------------------------------------------------------------
 133 | 
 134 | (def screens-map [bucket-screen
 135 |                   buckets-screen
 136 |                   pattern-srceen
-------------------------^------------------------------------------------------
 Use of undeclared Var time-align-mobile.navigation/pattern-srceen
--------------------------------------------------------------------------------
 137 |                   patterns-screen
 138 |                   period-screen
 139 |                   periods-screen
 140 |                   template-screen
--------------------------------------------------------------------------------
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 1 warnings, 0.40s)

------ WARNING #1 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/navigation.cljs:136:19
--------------------------------------------------------------------------------
 133 | 
 134 | (def screens-map [bucket-screen
 135 |                   buckets-screen
 136 |                   pattern-srceen
-------------------------^------------------------------------------------------
 Use of undeclared Var time-align-mobile.navigation/pattern-srceen
--------------------------------------------------------------------------------
 137 |                   patterns-screen
 138 |                   period-screen
 139 |                   periods-screen
 140 |                   template-screen
--------------------------------------------------------------------------------
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 1 warnings, 0.41s)

------ WARNING #1 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/navigation.cljs:136:19
--------------------------------------------------------------------------------
 133 | 
 134 | (def screens-map [bucket-screen
 135 |                   buckets-screen
 136 |                   pattern-srceen
-------------------------^------------------------------------------------------
 Use of undeclared Var time-align-mobile.navigation/pattern-srceen
--------------------------------------------------------------------------------
 137 |                   patterns-screen
 138 |                   period-screen
 139 |                   periods-screen
 140 |                   template-screen
--------------------------------------------------------------------------------
[:app] Compiling ...
[:app] Build completed. (178 files, 3 compiled, 0 warnings, 0.10s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.40s)
({:path [:forms :pattern-form :cljs.spec.alpha/nil], :pred nil?, :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]} {:path [:forms :pattern-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :id)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]} {:path [:forms :pattern-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :label)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]} {:path [:forms :pattern-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :created)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]} {:path [:forms :pattern-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :last-edited)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]} {:path [:forms :pattern-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :templates)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]})
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.19s)
({:path [:forms :pattern-form :cljs.spec.alpha/nil], :pred nil?, :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]} {:path [:forms :pattern-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :id)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]} {:path [:forms :pattern-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :label)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]} {:path [:forms :pattern-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :created)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]} {:path [:forms :pattern-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :last-edited)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]} {:path [:forms :pattern-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :templates)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/pattern-form], :in [:forms :pattern-form]})
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.20s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.42s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.07s)
[{:id #uuid "ffa49881-38d4-4d4f-ab19-a7cef18c4465", :label "an example pattern", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data "{}", :templates [{:id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :bucket-id #uuid "a7396f81-38d4-4d4f-ab19-a7cef18c4ea2", :label "do something in time align", :created #inst "2019-04-18T01:12:40.195-00:00", :last-edited #inst "2019-04-18T01:12:40.195-00:00", :data {}, :start {:hour 12, :minute 30}, :stop {:hour 14, :minute 0}}]}]
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.07s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.18s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.08s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.07s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.07s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.37s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.40s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.38s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.40s)
({:path [:forms :bucket-form :cljs.spec.alpha/nil], :pred nil?, :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/bucket-form], :in [:forms :bucket-form]} {:path [:forms :bucket-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :id)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/bucket-form], :in [:forms :bucket-form]} {:path [:forms :bucket-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :label)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/bucket-form], :in [:forms :bucket-form]} {:path [:forms :bucket-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :created)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/bucket-form], :in [:forms :bucket-form]} {:path [:forms :bucket-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :last-edited)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/bucket-form], :in [:forms :bucket-form]} {:path [:forms :bucket-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :color)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/bucket-form], :in [:forms :bucket-form]} {:path [:forms :bucket-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :periods)), :val {:data ""}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/bucket-form], :in [:forms :bucket-form]})
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.38s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.06s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.08s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.40s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.42s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.41s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 4 warnings, 0.08s)

------ WARNING #1 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs:68:47
--------------------------------------------------------------------------------
  65 |                                    minute)]
  66 |     [view {:style {:flex-direction "row"}}
  67 |      [text {:style (field-label-changeable-style @changes :stop)} ":stop"]
  68 |      [touchable-highlight {:on-press #(reset! stop-modal-visible true)}
-----------------------------------------------------^--------------------------
 Use of undeclared Var time-align-mobile.screens.template-form/stop-modal-visible
--------------------------------------------------------------------------------
  69 |       [text (format-time stop-time)]]
  70 |      [date-time-picker {:is-visible @stop-modal-visible
  71 |                         :date       stop-time
  72 |                         :mode       "time"
--------------------------------------------------------------------------------

------ WARNING #2 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs:70:38
--------------------------------------------------------------------------------
  67 |      [text {:style (field-label-changeable-style @changes :stop)} ":stop"]
  68 |      [touchable-highlight {:on-press #(reset! stop-modal-visible true)}
  69 |       [text (format-time stop-time)]]
  70 |      [date-time-picker {:is-visible @stop-modal-visible
--------------------------------------------^-----------------------------------
 Use of undeclared Var time-align-mobile.screens.template-form/stop-modal-visible
--------------------------------------------------------------------------------
  71 |                         :date       stop-time
  72 |                         :mode       "time"
  73 |                         :on-confirm (fn [d]
  74 |                                       (dispatch [:update-template-form {:stop {:hour   (.getHours d)
--------------------------------------------------------------------------------

------ WARNING #3 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs:76:47
--------------------------------------------------------------------------------
  73 |                         :on-confirm (fn [d]
  74 |                                       (dispatch [:update-template-form {:stop {:hour   (.getHours d)
  75 |                                                                                 :minute (.getMinutes d)}}])
  76 |                                       (reset! stop-modal-visible false))
-----------------------------------------------------^--------------------------
 Use of undeclared Var time-align-mobile.screens.template-form/stop-modal-visible
--------------------------------------------------------------------------------
  77 |                         :on-cancel  #(reset! stop-modal-visible false)}]]))
  78 | 
  79 | (defn root [params]
  80 |   (let [template-form            (subscribe [:get-template-form])
--------------------------------------------------------------------------------

------ WARNING #4 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs:77:46
--------------------------------------------------------------------------------
  74 |                                       (dispatch [:update-template-form {:stop {:hour   (.getHours d)
  75 |                                                                                 :minute (.getMinutes d)}}])
  76 |                                       (reset! stop-modal-visible false))
  77 |                         :on-cancel  #(reset! stop-modal-visible false)}]]))
----------------------------------------------------^---------------------------
 Use of undeclared Var time-align-mobile.screens.template-form/stop-modal-visible
--------------------------------------------------------------------------------
  78 | 
  79 | (defn root [params]
  80 |   (let [template-form            (subscribe [:get-template-form])
  81 |         update-structured-data (fn [new-data]
--------------------------------------------------------------------------------
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.08s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.09s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.07s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.08s)
[:app] Compiling ...
[:app] Build failure:
------ ERROR -------------------------------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/period_form.cljs:1:1
--------------------------------------------------------------------------------

   1 | (ns time-align-mobile.screens.period-form
-------^------------------------------------------------------------------------
Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist
--------------------------------------------------------------------------------
   2 |   (:require [time-align-mobile.js-imports :refer [view text]]
   3 |             [re-frame.core :refer [subscribe dispatch]]
   4 |             ["react" :as react]
   5 |             [time-align-mobile.js-imports :refer [view
--------------------------------------------------------------------------------

[:app] Compiling ...
[:app] Build failure:
------ ERROR -------------------------------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/period_form.cljs:1:1
--------------------------------------------------------------------------------

   1 | (ns time-align-mobile.screens.period-form
-------^------------------------------------------------------------------------
Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist
--------------------------------------------------------------------------------
   2 |   (:require [time-align-mobile.js-imports :refer [view text]]
   3 |             [re-frame.core :refer [subscribe dispatch]]
   4 |             ["react" :as react]
   5 |             [time-align-mobile.js-imports :refer [view
--------------------------------------------------------------------------------

[:app] Compiling ...
[:app] Build failure:
compilation failed
{:tag :shadow.build.compiler/fail-many, :resource-ids ([:shadow.build.classpath/resource "time_align_mobile/screens/template_form.cljs"] [:shadow.build.classpath/resource "time_align_mobile/screens/period_form.cljs"]), :errors {[:shadow.build.classpath/resource "time_align_mobile/screens/template_form.cljs"] #error {
 :cause "Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist"
 :data {:file "time_align_mobile/screens/template_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym pattern-parent-picker-comp}}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message "failed to compile resource: [:shadow.build.classpath/resource \"time_align_mobile/screens/template_form.cljs\"]"
   :data {:source-excerpt {:start-idx 0, :before [], :line "(ns time-align-mobile.screens.template-form", :after ["  (:require [time-align-mobile.js-imports :refer [view text]]" "            [re-frame.core :refer [subscribe dispatch]]" "            [\"react\" :as react]" "            [time-align-mobile.js-imports :refer [view"]}, :file #object[java.io.File 0x6a630dd4 "/home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs"], :resource-id [:shadow.build.classpath/resource "time_align_mobile/screens/template_form.cljs"], :column 1, :line 1, :url #object[java.net.URL 0x623a67bd "file:/home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs"], :source-id [:shadow.build.classpath/resource "time_align_mobile/screens/template_form.cljs"], :tag :shadow.build.compiler/compile-cljs, :ex-data {:file "time_align_mobile/screens/template_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym pattern-parent-picker-comp}}}
   :at [shadow.build.compiler$maybe_compile_cljs$fn__11739 invoke "compiler.clj" 786]}
  {:type clojure.lang.ExceptionInfo
   :message "Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist"
   :data {:file "time_align_mobile/screens/template_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym pattern-parent-picker-comp}}
   :at [shadow.build.cljs_bridge$error invokeStatic "cljs_bridge.clj" 166]}]
 :trace
 [[shadow.build.cljs_bridge$error invokeStatic "cljs_bridge.clj" 166]
  [shadow.build.cljs_bridge$error invoke "cljs_bridge.clj" 163]
  [shadow.build.cljs_bridge$check_uses_BANG_ invokeStatic "cljs_bridge.clj" 184]
  [shadow.build.cljs_bridge$check_uses_BANG_ invoke "cljs_bridge.clj" 173]
  [shadow.build.compiler$post_analyze_ns invokeStatic "compiler.clj" 51]
  [shadow.build.compiler$post_analyze_ns invoke "compiler.clj" 43]
  [shadow.build.compiler$post_analyze invokeStatic "compiler.clj" 89]
  [shadow.build.compiler$post_analyze invoke "compiler.clj" 86]
  [shadow.build.compiler$analyze invokeStatic "compiler.clj" 210]
  [shadow.build.compiler$analyze invoke "compiler.clj" 173]
  [shadow.build.compiler$analyze invokeStatic "compiler.clj" 175]
  [shadow.build.compiler$analyze invoke "compiler.clj" 173]
  [shadow.build.compiler$default_analyze_cljs invokeStatic "compiler.clj" 311]
  [shadow.build.compiler$default_analyze_cljs invoke "compiler.clj" 300]
  [clojure.core$partial$fn__5824 invoke "core.clj" 2625]
  [shadow.build.compiler$do_analyze_cljs_string invokeStatic "compiler.clj" 254]
  [shadow.build.compiler$do_analyze_cljs_string invoke "compiler.clj" 212]
  [shadow.build.compiler$analyze_cljs_string$fn__11628 invoke "compiler.clj" 375]
  [shadow.build.compiler$analyze_cljs_string invokeStatic "compiler.clj" 374]
  [shadow.build.compiler$analyze_cljs_string invoke "compiler.clj" 372]
  [shadow.build.compiler$do_compile_cljs_resource$fn__11649 invoke "compiler.clj" 468]
  [shadow.build.compiler$do_compile_cljs_resource invokeStatic "compiler.clj" 450]
  [shadow.build.compiler$do_compile_cljs_resource invoke "compiler.clj" 408]
  [shadow.build.compiler$maybe_compile_cljs$fn__11739 invoke "compiler.clj" 744]
  [shadow.build.compiler$maybe_compile_cljs invokeStatic "compiler.clj" 743]
  [shadow.build.compiler$maybe_compile_cljs invoke "compiler.clj" 719]
  [shadow.build.compiler$par_compile_one invokeStatic "compiler.clj" 852]
  [shadow.build.compiler$par_compile_one invoke "compiler.clj" 807]
  [shadow.build.compiler$par_compile_cljs_sources$fn__11775$iter__11797__11801$fn__11802$fn__11803$fn__11804 invoke "compiler.clj" 925]
  [clojure.lang.AFn applyToHelper "AFn.java" 152]
  [clojure.lang.AFn applyTo "AFn.java" 144]
  [clojure.core$apply invokeStatic "core.clj" 665]
  [clojure.core$with_bindings_STAR_ invokeStatic "core.clj" 1973]
  [clojure.core$with_bindings_STAR_ doInvoke "core.clj" 1973]
  [clojure.lang.RestFn invoke "RestFn.java" 425]
  [clojure.lang.AFn applyToHelper "AFn.java" 156]
  [clojure.lang.RestFn applyTo "RestFn.java" 132]
  [clojure.core$apply invokeStatic "core.clj" 669]
  [clojure.core$bound_fn_STAR_$fn__5734 doInvoke "core.clj" 2003]
  [clojure.lang.RestFn invoke "RestFn.java" 397]
  [clojure.lang.AFn call "AFn.java" 18]
  [java.util.concurrent.FutureTask run "FutureTask.java" 266]
  [java.util.concurrent.ThreadPoolExecutor runWorker "ThreadPoolExecutor.java" 1149]
  [java.util.concurrent.ThreadPoolExecutor$Worker run "ThreadPoolExecutor.java" 624]
  [java.lang.Thread run "Thread.java" 748]]}, [:shadow.build.classpath/resource "time_align_mobile/screens/period_form.cljs"] #error {
 :cause "Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist"
 :data {:file "time_align_mobile/screens/period_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym bucket-parent-id-comp}}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message "failed to compile resource: [:shadow.build.classpath/resource \"time_align_mobile/screens/period_form.cljs\"]"
   :data {:source-excerpt {:start-idx 0, :before [], :line "(ns time-align-mobile.screens.period-form", :after ["  (:require [time-align-mobile.js-imports :refer [view text]]" "            [re-frame.core :refer [subscribe dispatch]]" "            [\"react\" :as react]" "            [time-align-mobile.js-imports :refer [view"]}, :file #object[java.io.File 0x3203d83d "/home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/period_form.cljs"], :resource-id [:shadow.build.classpath/resource "time_align_mobile/screens/period_form.cljs"], :column 1, :line 1, :url #object[java.net.URL 0x7e8abd9b "file:/home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/period_form.cljs"], :source-id [:shadow.build.classpath/resource "time_align_mobile/screens/period_form.cljs"], :tag :shadow.build.compiler/compile-cljs, :ex-data {:file "time_align_mobile/screens/period_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym bucket-parent-id-comp}}}
   :at [shadow.build.compiler$maybe_compile_cljs$fn__11739 invoke "compiler.clj" 786]}
  {:type clojure.lang.ExceptionInfo
   :message "Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist"
   :data {:file "time_align_mobile/screens/period_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym bucket-parent-id-comp}}
   :at [shadow.build.cljs_bridge$error invokeStatic "cljs_bridge.clj" 166]}]
 :trace
 [[shadow.build.cljs_bridge$error invokeStatic "cljs_bridge.clj" 166]
  [shadow.build.cljs_bridge$error invoke "cljs_bridge.clj" 163]
  [shadow.build.cljs_bridge$check_uses_BANG_ invokeStatic "cljs_bridge.clj" 184]
  [shadow.build.cljs_bridge$check_uses_BANG_ invoke "cljs_bridge.clj" 173]
  [shadow.build.compiler$post_analyze_ns invokeStatic "compiler.clj" 51]
  [shadow.build.compiler$post_analyze_ns invoke "compiler.clj" 43]
  [shadow.build.compiler$post_analyze invokeStatic "compiler.clj" 89]
  [shadow.build.compiler$post_analyze invoke "compiler.clj" 86]
  [shadow.build.compiler$analyze invokeStatic "compiler.clj" 210]
  [shadow.build.compiler$analyze invoke "compiler.clj" 173]
  [shadow.build.compiler$analyze invokeStatic "compiler.clj" 175]
  [shadow.build.compiler$analyze invoke "compiler.clj" 173]
  [shadow.build.compiler$default_analyze_cljs invokeStatic "compiler.clj" 311]
  [shadow.build.compiler$default_analyze_cljs invoke "compiler.clj" 300]
  [clojure.core$partial$fn__5824 invoke "core.clj" 2625]
  [shadow.build.compiler$do_analyze_cljs_string invokeStatic "compiler.clj" 254]
  [shadow.build.compiler$do_analyze_cljs_string invoke "compiler.clj" 212]
  [shadow.build.compiler$analyze_cljs_string$fn__11628 invoke "compiler.clj" 375]
  [shadow.build.compiler$analyze_cljs_string invokeStatic "compiler.clj" 374]
  [shadow.build.compiler$analyze_cljs_string invoke "compiler.clj" 372]
  [shadow.build.compiler$do_compile_cljs_resource$fn__11649 invoke "compiler.clj" 468]
  [shadow.build.compiler$do_compile_cljs_resource invokeStatic "compiler.clj" 450]
  [shadow.build.compiler$do_compile_cljs_resource invoke "compiler.clj" 408]
  [shadow.build.compiler$maybe_compile_cljs$fn__11739 invoke "compiler.clj" 744]
  [shadow.build.compiler$maybe_compile_cljs invokeStatic "compiler.clj" 743]
  [shadow.build.compiler$maybe_compile_cljs invoke "compiler.clj" 719]
  [shadow.build.compiler$par_compile_one invokeStatic "compiler.clj" 852]
  [shadow.build.compiler$par_compile_one invoke "compiler.clj" 807]
  [shadow.build.compiler$par_compile_cljs_sources$fn__11775$iter__11797__11801$fn__11802$fn__11803$fn__11804 invoke "compiler.clj" 925]
  [clojure.lang.AFn applyToHelper "AFn.java" 152]
  [clojure.lang.AFn applyTo "AFn.java" 144]
  [clojure.core$apply invokeStatic "core.clj" 665]
  [clojure.core$with_bindings_STAR_ invokeStatic "core.clj" 1973]
  [clojure.core$with_bindings_STAR_ doInvoke "core.clj" 1973]
  [clojure.lang.RestFn invoke "RestFn.java" 425]
  [clojure.lang.AFn applyToHelper "AFn.java" 156]
  [clojure.lang.RestFn applyTo "RestFn.java" 132]
  [clojure.core$apply invokeStatic "core.clj" 669]
  [clojure.core$bound_fn_STAR_$fn__5734 doInvoke "core.clj" 2003]
  [clojure.lang.RestFn invoke "RestFn.java" 397]
  [clojure.lang.AFn call "AFn.java" 18]
  [java.util.concurrent.FutureTask run "FutureTask.java" 266]
  [java.util.concurrent.ThreadPoolExecutor runWorker "ThreadPoolExecutor.java" 1149]
  [java.util.concurrent.ThreadPoolExecutor$Worker run "ThreadPoolExecutor.java" 624]
  [java.lang.Thread run "Thread.java" 748]]}}}
ExceptionInfo: compilation failed
	shadow.build.compiler/par-compile-cljs-sources/fn--11775 (compiler.clj:938)
	shadow.build.compiler/par-compile-cljs-sources (compiler.clj:872)
	shadow.build.compiler/par-compile-cljs-sources (compiler.clj:865)
	shadow.build.compiler/compile-cljs-sources (compiler.clj:981)
	shadow.build.compiler/compile-cljs-sources (compiler.clj:971)
	shadow.build.compiler/compile-all (compiler.clj:1250)
	shadow.build.compiler/compile-all (compiler.clj:1116)
	shadow.build.api/compile-sources (api.clj:250)
	shadow.build.api/compile-sources (api.clj:242)
	shadow.build/compile (build.clj:373)
	shadow.build/compile (build.clj:364)
	shadow.cljs.devtools.server.worker.impl/build-compile (impl.clj:287)
	shadow.cljs.devtools.server.worker.impl/build-compile (impl.clj:273)
	shadow.cljs.devtools.server.worker.impl/do-resource-update (impl.clj:870)
	shadow.cljs.devtools.server.worker.impl/do-resource-update (impl.clj:833)
	shadow.cljs.devtools.server.util/server-thread/fn--12888/fn--12889/fn--12897 (util.clj:292)
	shadow.cljs.devtools.server.util/server-thread/fn--12888/fn--12889 (util.clj:291)
	shadow.cljs.devtools.server.util/server-thread/fn--12888 (util.clj:264)
	java.lang.Thread.run (Thread.java:748)

[:app] Compiling ...
[:app] Build failure:
compilation failed
{:tag :shadow.build.compiler/fail-many, :resource-ids ([:shadow.build.classpath/resource "time_align_mobile/screens/period_form.cljs"] [:shadow.build.classpath/resource "time_align_mobile/screens/template_form.cljs"]), :errors {[:shadow.build.classpath/resource "time_align_mobile/screens/period_form.cljs"] #error {
 :cause "Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist"
 :data {:file "time_align_mobile/screens/period_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym bucket-parent-id-comp}}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message "failed to compile resource: [:shadow.build.classpath/resource \"time_align_mobile/screens/period_form.cljs\"]"
   :data {:source-excerpt {:start-idx 0, :before [], :line "(ns time-align-mobile.screens.period-form", :after ["  (:require [time-align-mobile.js-imports :refer [view text]]" "            [re-frame.core :refer [subscribe dispatch]]" "            [\"react\" :as react]" "            [time-align-mobile.js-imports :refer [view"]}, :file #object[java.io.File 0x3203d83d "/home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/period_form.cljs"], :resource-id [:shadow.build.classpath/resource "time_align_mobile/screens/period_form.cljs"], :column 1, :line 1, :url #object[java.net.URL 0x7e8abd9b "file:/home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/period_form.cljs"], :source-id [:shadow.build.classpath/resource "time_align_mobile/screens/period_form.cljs"], :tag :shadow.build.compiler/compile-cljs, :ex-data {:file "time_align_mobile/screens/period_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym bucket-parent-id-comp}}}
   :at [shadow.build.compiler$maybe_compile_cljs$fn__11739 invoke "compiler.clj" 786]}
  {:type clojure.lang.ExceptionInfo
   :message "Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist"
   :data {:file "time_align_mobile/screens/period_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/bucket-parent-id-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym bucket-parent-id-comp}}
   :at [shadow.build.cljs_bridge$error invokeStatic "cljs_bridge.clj" 166]}]
 :trace
 [[shadow.build.cljs_bridge$error invokeStatic "cljs_bridge.clj" 166]
  [shadow.build.cljs_bridge$error invoke "cljs_bridge.clj" 163]
  [shadow.build.cljs_bridge$check_uses_BANG_ invokeStatic "cljs_bridge.clj" 184]
  [shadow.build.cljs_bridge$check_uses_BANG_ invoke "cljs_bridge.clj" 173]
  [shadow.build.compiler$post_analyze_ns invokeStatic "compiler.clj" 51]
  [shadow.build.compiler$post_analyze_ns invoke "compiler.clj" 43]
  [shadow.build.compiler$post_analyze invokeStatic "compiler.clj" 89]
  [shadow.build.compiler$post_analyze invoke "compiler.clj" 86]
  [shadow.build.compiler$analyze invokeStatic "compiler.clj" 210]
  [shadow.build.compiler$analyze invoke "compiler.clj" 173]
  [shadow.build.compiler$analyze invokeStatic "compiler.clj" 175]
  [shadow.build.compiler$analyze invoke "compiler.clj" 173]
  [shadow.build.compiler$default_analyze_cljs invokeStatic "compiler.clj" 311]
  [shadow.build.compiler$default_analyze_cljs invoke "compiler.clj" 300]
  [clojure.core$partial$fn__5824 invoke "core.clj" 2625]
  [shadow.build.compiler$do_analyze_cljs_string invokeStatic "compiler.clj" 254]
  [shadow.build.compiler$do_analyze_cljs_string invoke "compiler.clj" 212]
  [shadow.build.compiler$analyze_cljs_string$fn__11628 invoke "compiler.clj" 375]
  [shadow.build.compiler$analyze_cljs_string invokeStatic "compiler.clj" 374]
  [shadow.build.compiler$analyze_cljs_string invoke "compiler.clj" 372]
  [shadow.build.compiler$do_compile_cljs_resource$fn__11649 invoke "compiler.clj" 468]
  [shadow.build.compiler$do_compile_cljs_resource invokeStatic "compiler.clj" 450]
  [shadow.build.compiler$do_compile_cljs_resource invoke "compiler.clj" 408]
  [shadow.build.compiler$maybe_compile_cljs$fn__11739 invoke "compiler.clj" 744]
  [shadow.build.compiler$maybe_compile_cljs invokeStatic "compiler.clj" 743]
  [shadow.build.compiler$maybe_compile_cljs invoke "compiler.clj" 719]
  [shadow.build.compiler$par_compile_one invokeStatic "compiler.clj" 852]
  [shadow.build.compiler$par_compile_one invoke "compiler.clj" 807]
  [shadow.build.compiler$par_compile_cljs_sources$fn__11775$iter__11797__11801$fn__11802$fn__11803$fn__11804 invoke "compiler.clj" 925]
  [clojure.lang.AFn applyToHelper "AFn.java" 152]
  [clojure.lang.AFn applyTo "AFn.java" 144]
  [clojure.core$apply invokeStatic "core.clj" 665]
  [clojure.core$with_bindings_STAR_ invokeStatic "core.clj" 1973]
  [clojure.core$with_bindings_STAR_ doInvoke "core.clj" 1973]
  [clojure.lang.RestFn invoke "RestFn.java" 425]
  [clojure.lang.AFn applyToHelper "AFn.java" 156]
  [clojure.lang.RestFn applyTo "RestFn.java" 132]
  [clojure.core$apply invokeStatic "core.clj" 669]
  [clojure.core$bound_fn_STAR_$fn__5734 doInvoke "core.clj" 2003]
  [clojure.lang.RestFn invoke "RestFn.java" 397]
  [clojure.lang.AFn call "AFn.java" 18]
  [java.util.concurrent.FutureTask run "FutureTask.java" 266]
  [java.util.concurrent.ThreadPoolExecutor runWorker "ThreadPoolExecutor.java" 1149]
  [java.util.concurrent.ThreadPoolExecutor$Worker run "ThreadPoolExecutor.java" 624]
  [java.lang.Thread run "Thread.java" 748]]}, [:shadow.build.classpath/resource "time_align_mobile/screens/template_form.cljs"] #error {
 :cause "Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist"
 :data {:file "time_align_mobile/screens/template_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym pattern-parent-picker-comp}}
 :via
 [{:type clojure.lang.ExceptionInfo
   :message "failed to compile resource: [:shadow.build.classpath/resource \"time_align_mobile/screens/template_form.cljs\"]"
   :data {:source-excerpt {:start-idx 0, :before [], :line "(ns time-align-mobile.screens.template-form", :after ["  (:require [time-align-mobile.js-imports :refer [view text]]" "            [re-frame.core :refer [subscribe dispatch]]" "            [\"react\" :as react]" "            [time-align-mobile.js-imports :refer [view"]}, :file #object[java.io.File 0xcf50233 "/home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs"], :resource-id [:shadow.build.classpath/resource "time_align_mobile/screens/template_form.cljs"], :column 1, :line 1, :url #object[java.net.URL 0x3dc39b9f "file:/home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs"], :source-id [:shadow.build.classpath/resource "time_align_mobile/screens/template_form.cljs"], :tag :shadow.build.compiler/compile-cljs, :ex-data {:file "time_align_mobile/screens/template_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym pattern-parent-picker-comp}}}
   :at [shadow.build.compiler$maybe_compile_cljs$fn__11739 invoke "compiler.clj" 786]}
  {:type clojure.lang.ExceptionInfo
   :message "Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist"
   :data {:file "time_align_mobile/screens/template_form.cljs", :line 1, :column 1, :tag :cljs/analysis-error, :error-type :undeclared-ns-form, :msg "Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist", :extra {:type "var", :lib time-align-mobile.components.form-fields, :sym pattern-parent-picker-comp}}
   :at [shadow.build.cljs_bridge$error invokeStatic "cljs_bridge.clj" 166]}]
 :trace
 [[shadow.build.cljs_bridge$error invokeStatic "cljs_bridge.clj" 166]
  [shadow.build.cljs_bridge$error invoke "cljs_bridge.clj" 163]
  [shadow.build.cljs_bridge$check_uses_BANG_ invokeStatic "cljs_bridge.clj" 184]
  [shadow.build.cljs_bridge$check_uses_BANG_ invoke "cljs_bridge.clj" 173]
  [shadow.build.compiler$post_analyze_ns invokeStatic "compiler.clj" 51]
  [shadow.build.compiler$post_analyze_ns invoke "compiler.clj" 43]
  [shadow.build.compiler$post_analyze invokeStatic "compiler.clj" 89]
  [shadow.build.compiler$post_analyze invoke "compiler.clj" 86]
  [shadow.build.compiler$analyze invokeStatic "compiler.clj" 210]
  [shadow.build.compiler$analyze invoke "compiler.clj" 173]
  [shadow.build.compiler$analyze invokeStatic "compiler.clj" 175]
  [shadow.build.compiler$analyze invoke "compiler.clj" 173]
  [shadow.build.compiler$default_analyze_cljs invokeStatic "compiler.clj" 311]
  [shadow.build.compiler$default_analyze_cljs invoke "compiler.clj" 300]
  [clojure.core$partial$fn__5824 invoke "core.clj" 2625]
  [shadow.build.compiler$do_analyze_cljs_string invokeStatic "compiler.clj" 254]
  [shadow.build.compiler$do_analyze_cljs_string invoke "compiler.clj" 212]
  [shadow.build.compiler$analyze_cljs_string$fn__11628 invoke "compiler.clj" 375]
  [shadow.build.compiler$analyze_cljs_string invokeStatic "compiler.clj" 374]
  [shadow.build.compiler$analyze_cljs_string invoke "compiler.clj" 372]
  [shadow.build.compiler$do_compile_cljs_resource$fn__11649 invoke "compiler.clj" 468]
  [shadow.build.compiler$do_compile_cljs_resource invokeStatic "compiler.clj" 450]
  [shadow.build.compiler$do_compile_cljs_resource invoke "compiler.clj" 408]
  [shadow.build.compiler$maybe_compile_cljs$fn__11739 invoke "compiler.clj" 744]
  [shadow.build.compiler$maybe_compile_cljs invokeStatic "compiler.clj" 743]
  [shadow.build.compiler$maybe_compile_cljs invoke "compiler.clj" 719]
  [shadow.build.compiler$par_compile_one invokeStatic "compiler.clj" 852]
  [shadow.build.compiler$par_compile_one invoke "compiler.clj" 807]
  [shadow.build.compiler$par_compile_cljs_sources$fn__11775$iter__11797__11801$fn__11802$fn__11803$fn__11804 invoke "compiler.clj" 925]
  [clojure.lang.AFn applyToHelper "AFn.java" 152]
  [clojure.lang.AFn applyTo "AFn.java" 144]
  [clojure.core$apply invokeStatic "core.clj" 665]
  [clojure.core$with_bindings_STAR_ invokeStatic "core.clj" 1973]
  [clojure.core$with_bindings_STAR_ doInvoke "core.clj" 1973]
  [clojure.lang.RestFn invoke "RestFn.java" 425]
  [clojure.lang.AFn applyToHelper "AFn.java" 156]
  [clojure.lang.RestFn applyTo "RestFn.java" 132]
  [clojure.core$apply invokeStatic "core.clj" 669]
  [clojure.core$bound_fn_STAR_$fn__5734 doInvoke "core.clj" 2003]
  [clojure.lang.RestFn invoke "RestFn.java" 397]
  [clojure.lang.AFn call "AFn.java" 18]
  [java.util.concurrent.FutureTask run "FutureTask.java" 266]
  [java.util.concurrent.ThreadPoolExecutor runWorker "ThreadPoolExecutor.java" 1149]
  [java.util.concurrent.ThreadPoolExecutor$Worker run "ThreadPoolExecutor.java" 624]
  [java.lang.Thread run "Thread.java" 748]]}}}
ExceptionInfo: compilation failed
	shadow.build.compiler/par-compile-cljs-sources/fn--11775 (compiler.clj:938)
	shadow.build.compiler/par-compile-cljs-sources (compiler.clj:872)
	shadow.build.compiler/par-compile-cljs-sources (compiler.clj:865)
	shadow.build.compiler/compile-cljs-sources (compiler.clj:981)
	shadow.build.compiler/compile-cljs-sources (compiler.clj:971)
	shadow.build.compiler/compile-all (compiler.clj:1250)
	shadow.build.compiler/compile-all (compiler.clj:1116)
	shadow.build.api/compile-sources (api.clj:250)
	shadow.build.api/compile-sources (api.clj:242)
	shadow.build/compile (build.clj:373)
	shadow.build/compile (build.clj:364)
	shadow.cljs.devtools.server.worker.impl/build-compile (impl.clj:287)
	shadow.cljs.devtools.server.worker.impl/build-compile (impl.clj:273)
	shadow.cljs.devtools.server.worker.impl/do-resource-update (impl.clj:870)
	shadow.cljs.devtools.server.worker.impl/do-resource-update (impl.clj:833)
	shadow.cljs.devtools.server.util/server-thread/fn--12888/fn--12889/fn--12897 (util.clj:292)
	shadow.cljs.devtools.server.util/server-thread/fn--12888/fn--12889 (util.clj:291)
	shadow.cljs.devtools.server.util/server-thread/fn--12888 (util.clj:264)
	java.lang.Thread.run (Thread.java:748)

[:app] Compiling ...
[:app] Build failure:
------ ERROR -------------------------------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs:1:1
--------------------------------------------------------------------------------

   1 | (ns time-align-mobile.screens.template-form
-------^------------------------------------------------------------------------
Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist
--------------------------------------------------------------------------------
   2 |   (:require [time-align-mobile.js-imports :refer [view text]]
   3 |             [re-frame.core :refer [subscribe dispatch]]
   4 |             ["react" :as react]
   5 |             [time-align-mobile.js-imports :refer [view
--------------------------------------------------------------------------------

[:app] Compiling ...
[:app] Build failure:
------ ERROR -------------------------------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs:1:1
--------------------------------------------------------------------------------

   1 | (ns time-align-mobile.screens.template-form
-------^------------------------------------------------------------------------
Invalid :refer, var time-align-mobile.components.form-fields/pattern-parent-picker-comp does not exist
--------------------------------------------------------------------------------
   2 |   (:require [time-align-mobile.js-imports :refer [view text]]
   3 |             [re-frame.core :refer [subscribe dispatch]]
   4 |             ["react" :as react]
   5 |             [time-align-mobile.js-imports :refer [view
--------------------------------------------------------------------------------

[:app] Compiling ...
[:app] Build failure:
------ ERROR -------------------------------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/period_form.cljs:1:1
--------------------------------------------------------------------------------

   1 | (ns time-align-mobile.screens.period-form
-------^------------------------------------------------------------------------
Invalid :refer, var time-align-mobile.components.form-fields/parent-picker-comp does not exist
--------------------------------------------------------------------------------
   2 |   (:require [time-align-mobile.js-imports :refer [view text]]
   3 |             [re-frame.core :refer [subscribe dispatch]]
   4 |             ["react" :as react]
   5 |             [time-align-mobile.js-imports :refer [view
--------------------------------------------------------------------------------

[:app] Compiling ...
[:app] Build failure:
------ ERROR -------------------------------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/period_form.cljs:1:1
--------------------------------------------------------------------------------

   1 | (ns time-align-mobile.screens.period-form
-------^------------------------------------------------------------------------
Invalid :refer, var time-align-mobile.components.form-fields/parent-picker-comp does not exist
--------------------------------------------------------------------------------
   2 |   (:require [time-align-mobile.js-imports :refer [view text]]
   3 |             [re-frame.core :refer [subscribe dispatch]]
   4 |             ["react" :as react]
   5 |             [time-align-mobile.js-imports :refer [view
--------------------------------------------------------------------------------

[:app] Compiling ...
[:app] Build completed. (178 files, 7 compiled, 0 warnings, 0.12s)
({:path [:forms :template-form :cljs.spec.alpha/nil], :pred nil?, :val {:bucket-label nil, :start {:hour 12, :minute 30}, :pattern-id #uuid "c572f253-b0f5-4c38-9e7d-34c1381cc143", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "do something in time align", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-23T02:49:58.807-00:00", :bucket-color nil, :data "{}"}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/template-form], :in [:forms :template-form]} {:path [:forms :template-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :bucket-id)), :val {:bucket-label nil, :start {:hour 12, :minute 30}, :pattern-id #uuid "c572f253-b0f5-4c38-9e7d-34c1381cc143", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "do something in time align", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-23T02:49:58.807-00:00", :bucket-color nil, :data "{}"}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/template-form], :in [:forms :template-form]} {:path [:forms :template-form :cljs.spec.alpha/pred :bucket-label], :pred cljs.core/string?, :val nil, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/template-form :time-align-mobile.db$app-db$forms$template-form/bucket-label], :in [:forms :template-form :bucket-label]} {:path [:forms :template-form :cljs.spec.alpha/pred :bucket-color], :pred (cljs.core/fn [%] (cljs.core/= "#" (cljs.core/first %))), :val nil, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/template-form :time-align-mobile.db$app-db$forms$template-form/bucket-color], :in [:forms :template-form :bucket-color]})
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.44s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.39s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.06s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.41s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.40s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.07s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 2 warnings, 0.08s)

------ WARNING #1 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs:108:8
--------------------------------------------------------------------------------
 105 |       [pattern-parent-picker-comp template-form changes patterns :update-template-form]
 106 | 
 107 | 
 108 |       [bucket-parent-id-comp template-form changes]
--------------^-----------------------------------------------------------------
 Use of undeclared Var time-align-mobile.screens.template-form/bucket-parent-id-comp
--------------------------------------------------------------------------------
 109 | 
 110 |       [bucket-parent-picker-comp template-form changes patterns :update-template-form]
 111 | 
 112 |       [id-comp template-form]
--------------------------------------------------------------------------------

------ WARNING #2 - :undeclared-var --------------------------------------------
 File: /home/justin/projects/time-align-mobile/src/main/time_align_mobile/screens/template_form.cljs:110:8
--------------------------------------------------------------------------------
 107 | 
 108 |       [bucket-parent-id-comp template-form changes]
 109 | 
 110 |       [bucket-parent-picker-comp template-form changes patterns :update-template-form]
--------------^-----------------------------------------------------------------
 Use of undeclared Var time-align-mobile.screens.template-form/bucket-parent-picker-comp
--------------------------------------------------------------------------------
 111 | 
 112 |       [id-comp template-form]
 113 | 
 114 |       [created-comp template-form]
--------------------------------------------------------------------------------
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.06s)
({:path [:forms :template-form :cljs.spec.alpha/nil], :pred nil?, :val {:bucket-label nil, :start {:hour 12, :minute 30}, :pattern-id #uuid "c572f253-b0f5-4c38-9e7d-34c1381cc143", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "do something in time align", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-23T02:49:58.807-00:00", :bucket-color nil, :data "{}"}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/template-form], :in [:forms :template-form]} {:path [:forms :template-form :cljs.spec.alpha/pred], :pred (cljs.core/fn [%] (cljs.core/contains? % :bucket-id)), :val {:bucket-label nil, :start {:hour 12, :minute 30}, :pattern-id #uuid "c572f253-b0f5-4c38-9e7d-34c1381cc143", :created #inst "2019-04-18T01:12:40.195-00:00", :stop {:hour 14, :minute 0}, :label "do something in time align", :id #uuid "bb9b9881-38d4-4d4f-ab19-a7cef18c6647", :last-edited #inst "2019-04-23T02:49:58.807-00:00", :bucket-color nil, :data "{}"}, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/template-form], :in [:forms :template-form]} {:path [:forms :template-form :cljs.spec.alpha/pred :bucket-label], :pred cljs.core/string?, :val nil, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/template-form :time-align-mobile.db$app-db$forms$template-form/bucket-label], :in [:forms :template-form :bucket-label]} {:path [:forms :template-form :cljs.spec.alpha/pred :bucket-color], :pred (cljs.core/fn [%] (cljs.core/= "#" (cljs.core/first %))), :val nil, :via [:time-align-mobile.db$app-db/forms :time-align-mobile.db$app-db$forms/template-form :time-align-mobile.db$app-db$forms$template-form/bucket-color], :in [:forms :template-form :bucket-color]})
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.41s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.44s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.41s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.08s)
[:app] Compiling ...
[:app] Build completed. (178 files, 2 compiled, 0 warnings, 0.21s)
[:app] Compiling ...
[:app] Build completed. (178 files, 6 compiled, 0 warnings, 0.21s)
[:app] Compiling ...
[:app] Build completed. (178 files, 1 compiled, 0 warnings, 0.08s)

time-align-mobile.subs> 